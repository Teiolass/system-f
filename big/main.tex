\documentclass[]{marticle}
\usepackage{mstyle}

\title{\textbf{\huge Rappresentabilit\`a di Funzioni nel Lambda-calcolo
Polimorfico}}
\date{}


\begin{document}
\maketitle

\section{Introduzione}

Il $\l$-calcolo \`e un sistema formale sviluppato negli anni '30 da Alonzo
Church. Lo scopo originario era quello di fondare la matematica, e non \`e stato
raggiunto in quanto il sistema si rivel\`o inconsistente, come dimostrato da
Kleene e Rosser nel 1936. Un sottoinsieme di tale sistema si \`e comunque
sviluppato per la sua capacit\`a di esprimere computazioni mediante astrazione
su variabili e sostituzione. Lo studio del $\l$-calcolo \`e dunque lo studio di
entit\`a dette $\l$-termini che svolgono allo stesso tempo il ruolo di programmi
e di dati su cui i programmi lavorano. Sui termini si considerer\`a una
relazione di ordine, detta riduzione, che rappresenta l'esecuzione dei
programmi. All'interno del $\l$-calcolo, con opportune codifiche, \`e possibile
rappresentare i numeri naturali e tutte le funzioni calcolabili. Poich\`e
l'insieme delle funzioni calcolabili totali non \`e ricorsivamente enumerabile
esistono dei termini la cui computazione non termina (diremo che non sono
normalizzanti).

Il $\l$-calcolo tipato \`e una variante del $\l$-calcolo in cui ad ogni termine
\`e associata un'entit\`a sintattica detta tipo. Esso ha origine nei lavori di
Haskell Curry (1934) e di Church (1940).  La riduzione in questo caso \`e
ridefinita aggiungendo vincoli sul come \`e possibile comporre i termini in base
al loro tipo, e in particolare rende chiara la classe di dati su cui ciascun
programma pu\`o operare.  Come conseguenza si pu\`o dimostrare che questa
variante ha la propriet\`a di normalizzazione, ovvero tutte le computazioni
terminano e tutti i termini sono normalizzanti. I tipi sono studiati anche in
ambito informatico per la verifica in modo automatico della presenza di alcuni
errori che dovrebbero essere altrimenti cercati a mano dal programmatore.

In questa tesi ci occuperemo di una variante del calcolo detta sistema F, anche
nota come $\l$-calcolo polimorfico o $\l$-calcolo del secondo ordine. Essa \`e
stata sviluppata dal logico Jean-Yves Girard (1972) e dall'informatico John
Charles Reynolds (1974). Il sistema F \`e essenzialmente una variante del
$\l$-calcolo tipato in cui viene aggiunta una quantificazione universale sui
tipi.

Anche per il sistema F vale la propriet\`a di normalizzazione. Troveremo dunque
che le funzioni rappresentabili nel sistema F sono solo un sottoinsieme delle
funzioni calcolabili totali, e ne daremo una caratterizzazione pi\`u precisa:
esse sono esattamente le funzioni di cui l'aritmetica di Heyting del secondo
ordine dimostra la totalit\`a.  Mostreremo quindi un esempio di funzione non
rappresentabile nel sistema F e dedurremo dunque la consistenza dell'aritmetica
di Peano del secondo ordine a partire dal risultato di normalizzazione.

Metteremo inoltre tale risultato a confronto con un risultato equivalente su
un'altra variante del $\l$-calcolo, detta sistema T di G\"odel, per cui vale
ugualmente la propriet\`a di normalizzazione. Nel sistema T infatti le funzioni
rappresentabili sono esattamente quelle che l'aritmetica di Heyting del primo
ordine dimostra essere totali.

\section{Il $\lambda$-calcolo non tipato}

In questa tesi ci occuperemo di studiare alcune propriet\`a di diversi tipi
di $\lambda$-calcoli. Iniziamo dunque definendo gli elementi fondamentali del
$\lambda$-calcolo pi\`u semplice, ovvero quello non tipato.

\begin{block}[Definizione]
    I termini del $\l$-calcolo semplice si definiscono induttivamente come:
    \begin{itemize}
        \item Le variabili $x_1, x_2, \dots$ sono termini.
        \item Se $t$ e $v$ sono termini, allora anche l'applicazione $(tv)$ \`e
            un termine.
        \item Se $t$ \`e un termine e $x$ \`e una variabile, l'astrazione $(\l
            x.  t)$ \`e un termine.
    \end{itemize}

    Dato un termine $t$, i sottotermini sono tutti i termini che appaiono nella
    costruzione induttiva di $t$.
\end{block}

L'idea intuitiva dietro questa definizione \`e quella che un termine del tipo
$\l x.t$ corrisponde a un programma con input $x$ e corpo $t$. Inoltre
un'applicazione della forma $tv$ rappresenta  un programma $t$ quando eseguito
con input $v$. Un fatto interessante da notare \`e che i termini possono
svolgere indistintamente il ruolo di programma e di dato su cui un programma
opera.

Per comodit\`a e leggibilit\`a delle notazioni, ometteremo spesso le parentesi
sottointendendo che l'applicazione si associa a sinistra (e quindi $xyz=(xy)z$)
e l'astrazione si associa a destra, usando un singolo simbolo $\l$, per esempio
$\l xyz.yyxz = \l x. (\l y. (\l z. yyxz))$. Sempre per compattezza di notazione,
se $\overline{x}$ \`e un vettore di variabili $x_1,\dots,x_n$, scriveremo $\l
\overline{x}$ per intendere $\l x_1\cdots x_n$.

In modo simile a quanto si fa comunemente in logica \`e utile distinguere le
occorrenze di una variabile in una formula tra occorrenze libere e legate. In
particolare l'astrazione \`e una sorta di quantificatore che lega la variabile
individuale a cui si riferisce. Pi\`u formalmente:

\begin{block}[Definizione]
    Un'occorrenza della variabile $x$ in un termine $t$ si dice legata se esiste
    un sottotermine del tipo $\l x. t'$ che la contiene. Si dice libera
    altrimenti.

    Inoltre, dato un termine $t$ si definiscono induttivamente le sue variabili
    libere come:
    \begin{itemize}
        \item Se $t=x$ dove $x$ \`e una variabile, allora \`e l'unica variabile
            libera d $t$.
        \item Se $t=uv$, allora le variabili libere di $t$ sono tutte e sole le
            variabili libere che compaiono in $u$ o in $v$.
        \item Se $t=\l x. u$, allora le variabili libere di $t$ sono tutte le
            variabili libere di $u$ con l'esclusione di $x$.
    \end{itemize}
\end{block}

Nel seguito considereremo i termini modulo il rinominare le variabili legate.
Questo corrisponde al fatto che in un programma \`e possibile rinominare i
parametri formali delle funzioni (modificando consistentemente le loro
occorrenze nei corpi di tali funzioni). La relazione di equivalenza che mette in
relazione un termine con tutti i termini uguali a esso a meno del rinominare le
variabili legate si chiama $\alpha$-equivalenza. Da qui in avanti, per
semplicit\`a, abuseremo della notazione riferendoci alle classi di equivalenza
con i loro elementi.

Con qualche accortezza per evitare la cattura delle variabili si pu\`o definire
la sostituzione di un termine su una variabile.

\begin{block}[Definizione]
    Se $u$ e $v$ sono termini e $x$ \`e una variabile, allora
    la sostituzione di $v$ su $x$ in $u$ \`e il termine $u \sub{v}{x}$ definito
    come:
    \begin{itemize}
        \item Se $u=x$ allora $u \sub{v}{x} = v$.
        \item Se $u=y$ con $y$ una variabile distinta da $x$, allora $u
            \sub{v}{x} = y$.
        \item Se $u = tw$, allora $u \sub{v}{x} = (t \sub{v}{x})(w \sub{v}{x})
            $.
        \item Se $u = \l y. t$ e $y$ \`e distinta da $x$ e non appare libera in
            $v$, allora $u \sub{v}{x} = \l y. t\sub{v}{x}$.
    \end{itemize}
\end{block}

A questo punto abbiamo presentato tutti gli strumenti per introdurre una
relazione fondamentale sui termini del calcolo, ovvero la conversione.

\begin{block}[Definizione]
    Dati due termini $u$ e $v$, si dice che $u$ si converte a $v$ e scriverermo
    $u \conv_C v$, se $v$ \`e ottenuto da $u$ sostituendo un sottotermine nella
    forma $(\l x. u')u''$ con $u'\sub{u''}{x}$ (quando tale sostituzione \`e
    permessa e quindi non si ha cattura delle variabili).

    Si dice che $u$ si riduce a $v$ se esistono $n$ termini $u_1, \dots, u_n$
    con $u_1 = u$ e $u_n = v$ tali che $u_1 \conv_C u_2 \conv_C \dots \conv_C
    u_n$. In tal caso scriveremo $u\conv v$.
\end{block}

Notiamo che la definizione dice essenzialmente che $\conv$ \`e la chiusura
transitiva di $\conv_C$. Tali nozioni di conversione e riduzione sono chiamati
in letteratura anche $\beta$-conversione e $\beta$-riduzione. La pi\`u piccola
relazione di equivalenza che contiene la $\beta$-conversione \`e detta
$\beta$-equivalenza.

L'idea di conversione corrisponde all'esecuzione di un passo del programma
corrispondente al termine che viene convertito. Notiamo per\`o che volendo
ridurre un termine, la successione delle conversioni non \`e univocamente
determinata, come nel termine $((\l x .xx)y)((\l x.x)z)$.

Facciamo ora due esempi importanti di riduzione.

\begin{block}[Esempio]
    \begin{gather*}
        (\l f . \l x . f(fx))(\l y. yy) \conv_C  \\
        \l x. (\l y. yy)((\l y.yy) x) \conv_C \\
        \l x .(\l y. yy)(xx) \conv_C \\
        \l x. xxxx.
    \end{gather*}
\end{block}

\begin{block}[Esempio]
    \begin{gather*}
        \Omega = (\l x.xx)(\l x.xx) \conv_C \\ 
        (\l x.xx)(\l x.xx) \conv_C \\
        \dots
    \end{gather*}
\end{block}

Notiamo che il primo esempio finisce con un termine che non pu\`o essere
ulteriormente convertito, mentre nel secondo la successione di conversioni \`e
infinita. Questa distinzione \`e importante e conduce alle seguenti definizioni.

\begin{block}[Definizione]
    Un termine si dice in forma normale se non pu\`o essere ulteriormente
    convertito. Un termine si dice normalizzante se pu\`o essere ridotto a un
    termine in forma normale.
\end{block}

Esistono comunque termini che pur essendo normalizzanti ammettono una
successione infinita di conversioni:

\begin{block}[Esempio]
    \begin{gather*}
        (\l x . \l y. y)\Omega z \conv_C z
    \end{gather*}
    ma convertendo ad ogni passo il termine $\Omega$ (si veda la sua definizione
    nell'esempio precedente), si ottiene che:
    \begin{gather*}
        (\l x . \l y. y)\Omega z \conv_C \\ 
        (\l x . \l y. y)\Omega z \conv_C \\
        \dots
    \end{gather*}
\end{block}

\`E allora utile introdurre le seguenti nozioni:
\begin{block}[Definizione]
    Dato un termine $t$ si definisce $\nu(t)$ il massimo numero di conversioni
    necessarie per portare $t$ in forma normale, ossia
    \begin{gather*}
        \nu (t) = \sup \setof { n \st
            \exists u_1, \dots, u_n \text{ per cui } \\
            t \conv_C u_1 \conv_C \dots
            \conv_C u_n \text{ e $u_n$ \`e in forma normale}
        }.
    \end{gather*}

    Un termine $t$ si dice fortemente normalizzante se $\nu(t) < \infty$.
\end{block}

Si osservi che se un termine \`e fortemente normalizzante allora \`e anche
normalizzante, e non pu\`o essere convertito un numero infinito di volte.

\deb{Convertendo sempre la redex pi\`u a sinistra si ottiene comunque sempre una
forma normale.}

Un'importante propriet\`a di cui gode la riduzione \`e detta propriet\`a di
Church-Rosser, che implica l'unicit\`a del termine in forma normale a cui si
converte un termine normalizzante.

\begin{block}[Teorema]
    Sia $t$ un termine. Se $u$ e $v$ sono termini per cui $t\conv u$ e $t\conv
    v$, allora esiste un quarto termine $w$ tale che $u\conv w$ e $v\conv w$.
\end{block}

I termini in forma normale hanno una struttura che presentiamo nel seguente
teorema:
\begin{block}[Proposizione]
    Un termine si dice in forma normale di testa se \`e nella forma
    \[
        \l \overline{x}.yu_1\cdots u_n,
    \]
    dove gli $u_i$ sono termini in forma normale e $y$ \`e una variabile (che a
    priori pu\`o non comparire in $\overline{x}$). Tutti i termini in forma
    normale sono in forma normale di testa e viceversa.
\end{block}
\begin{proof}
    Ragioniamo per induzione sulla complessit\`a dei termini. Se un termine \`e
    nella forma $\l x.u$, esso \`e in forma normale se e solo se $u$ \`e in
    forma normale, ed \`e in forma normale di testa se e solo se $u$ \`e in
    forma normale di testa. La tesi si ha dunque utilizzando l'ipotesi
    induttiva, che afferma l'equivalenza delle due propriet\`a su $u$. 

    Se invece consideriamo un termine nella forma $uv$, esso \`e in forma
    normale se e solo se sia $u$ che $v$ sono in forma normale e $u$ non \`e
    un'astrazione. Inoltre $uv$ \`e in forma normale di testa se e solo se $v$
    \`e normale e $u$ \`e in forma normale di testa e non un'astrazione. Per
    ipotesi induttiva, si ha la tesi.

    Infine se il termine \`e una variabile, la tesi \`e banalmente vera.
\end{proof}

\subsection{Rappresentabilit\`a nel $\lambda$-calcolo non tipato}

Possiamo individuare alcuni termini del $\l$-calcolo per essere messi in
corrispondenza con i numeri naturali. La scelta che faremo non \`e l'unica, ma
sicuramente \`e conveniente e si presta facilmente ad essere riutilizzata in
altre varianti del calcolo.

\begin{block}[Definizione]
    Dato un numero naturale $n$ definiamo il corrispondente numerale
    $\overline{n}$ come il termine $\l f x. f^n x$, dove il simbolo $f^n x$
    indica $f(f(\cdots f(x) \cdots))$, in cui la $f$ compare $n$ volte.
\end{block}

Possiamo interpretare $\overline{n}$ come un termine che avendo in input una
funzione $f$, la compone con se stessa $n$ volte. Osserviamo che inoltre i
numerali sono termini in forma normale, e dunque per la propriet\`a di
Church-Rosser sono anche termini distinti modulo la $\beta$-equivalenza.

\begin{block}[Definizione]
    Data una funzione (eventualmente parziale) $\phi\colon \N \rightarrow \N$,
    si dice che un termine $t$ rappresenta $\phi$ se per ogni coppia di naturali
    $m$ e $n$ vale che $\phi(n)=m$ se e solo se $t\overline{n}\conv\overline{m}$
    e $t\overline{n}$ non \`e normalizzante quando $\phi(n)=\bot$.
\end{block}

Facciamo ora alcuni esempi di funzioni rappresentabili:
\begin{block}[Esempio]
    Il termine $A = \l pq fx. (pf)(qfx)$ rappresenta l'addizione. Per esempio:
    \begin{gather*}
        A\overline{2}\ \overline{3} \conv \l fx. f^2 (f^3 x) = \\
        \l fx. f^5 x = \overline{5}.
    \end{gather*}

    \deb{Dimostriamo?}

    In modo simile esistono i termini $M = \l p q f x. q (p f) x$ e $E = \l p q
    f x. qpfx$ che rappresentano rispettivamente la moltiplicazione e
    l'esponenziazione. Questo ultimo termine \`e leggermente differente dagli
    altri due in quanto \`e l'unico in cui un numerale viene direttamente
    applicato ad un altro numerale. Vedremo che questa differenza sar\`a
    decisiva per la rappresentabilit\`a in alcune varianti di $\l$-calcolo.
\end{block}

La classe di funzioni rappresentabili nel $\l$-calcolo non tipato \`e
estremamente ampia, infatti vale il seguente teorema, \deb{di cui non daremo una
dimostrazione}:

\begin{block}[Teorema]
    Le funzioni rappresentabili nel $\l$-calcolo non tipato sono esattamente le
    funzioni calcolabili.
\end{block}

Un nodo cruciale nella dimostrazione del precedente teorema \`e l'esistenza di
un combinatore di punto fisso, ovvero di un termine $t$ tale che per ogni
termine $u$ vale che $tu = u(tu)$, modulo la $\beta$-conversione. Un esempio di
combinatore di punto fisso \`e il termine $Y = \l f. (\l x. f(xx))(\l x.
f(xx))$, come si pu\`o facilmente verificare. Esso \`e noto come combinatore di
punto fisso di Curry. Notiamo che tale termine non \`e normalizzante, ma pi\`u
in generale possiamo dimostrare che nessun combinatore di punto fisso $t$ pu\`o
essere normalizzante.  Infatti se indichiamo con $t'$ la forma normale di $tx$,
dove $x$ \`e una variabile, vale che $t' = xt'$, modulo la $\beta$-conversione.
Ma entrambi questi termini sono in forma normale, e dunque abbiamo l'assurdo.

\section{Il $\l$-calcolo tipato semplice}

Nel $\l$-calcolo non tipato, esistono termini per cui la normalizzazione non
corrisponde all'idea intuitiva di ``semplificazione'', come
nell'esempio \deb{quello con $\Omega$} oppure nel caso ancora peggiore seguente,
in cui il numero di sottotermini cresce proseguendo nella riduzione.

\begin{block}[Esempio]
    \begin{gather*}
        (\l x. xxx)(\l x. xxx) \conv \\
        (\l x. xxx)(\l x. xxx)(\l x. xxx)\conv \\
        \cdots
    \end{gather*}
\end{block} 

Il problema alla base di questo comportamento \`e il fatto che non vi \`e
distizione tra dati e porgrammi e in particolare \`e permessa l'applicazione di
un termine a se stesso. Versioni pi\`u sofisticate del calcolo puntano dunque a
introdurre dei vincoli sull'applicazione dei termini, ed \`e per questo motivo
che si introducono i tipi. L'idea \`e quella di associare ad ogni termine una
struttura sintattica chiamata tipo, e permettere l'applicazione di termini solo
se i loro tipi sono compatibili. Notiamo una forte somiglianza tra i tipi del
$\l$-calcolo e i tipi presenti nei linguaggi di programmazione.

Definiamo allora una variante del $\l$-calcolo detta $\l$-calcolo tipato
semplice.

\begin{block}[Definizione]
    I tipi del $\l$-calcolo tipato semplice sono definiti induttivamente come:
    \begin{itemize}
        \item $U_1, U_2, \dots$ sono tipi, detti variabili di tipo oppure tipi
            atomici.
        \item Se $U$ e $V$ sono tipi, allora anche $(U\rar V)$ \`e un tipo.
    \end{itemize}
    Per comodit\`a, in assenza di parentesi, l'associativit\`a di $\rar$ \`e
    intesa essere a destra: per esempio $U\rar V\rar W = (U\rar(V\rar W))$.

    A questo punto ricostruiamo i termini associando a ciascuno di essi un
    relativo tipo.
    \begin{itemize}
        \item Per ogni tipo $U$, le variabili $x^U_1, x^U_2, \dots$ sono termini
            di tipo $U$.
        \item Se $t$ e $v$ sono termini di tipo rispettivamente $U\rar V$ e $U$,
            allora l'applicazione $(tv)$ \`e un termine di tipo $V$.
        \item Se $t$ \`e un termine di tipo $V$ e $x$ \`e una variabile di tipo
            $U$, allora l'astrazione $(\l x.  t)$ \`e un termine di tipo $U\rar
            V$.
    \end{itemize}

    Per indicare che un termine $t$ \`e di tipo $U$ scriveremo anche $t^U$.
    Inoltre se il tipo delle variabili \`e chiaro dal contesto, ometteremo di
    indicarlo ad esponente.
\end{block}

Si vede dunque che il tipo $U\rightarrow V$ corrisponde all'idea delle funzioni
dai termini di tipo $U$ ai termini di tipo $V$, e che l'applicazione \`e
consentita solo quando ``il dominio della funzione e il tipo dell'argomento
coincidono''.

In modo identico a quanto gi\`a fatto per il $\l$-calcolo semplice (essendo i
termini tipato semplice un sottoinsieme di quelli del non tipato), \`e possibile
definire le nozioni di conversione, riduzione e forma normale. Si noti che tali
relazioni conservano il tipo dei termini.

\subsection{Normalizzazione Forte per il Tipato Semplice}
L'obiettivo di questa sezione \`e quella di dimostrare il seguente importante
risultato:
\begin{block}[Teorema]
    Tutti i termini del $\l$-calcolo tipato semplice sono fortemente
    normalizzanti.
\end{block}

Da questo fatto discende che l'espressivit\`a di questo calcolo \`e molto
ridotta rispetto a quella del $\l$-calcolo tipato semplice. Per esempio non
possiamo trovare nessun combinatore di punto fisso e vedremo che la classe di
funzioni rappresentabili \`e anch'essa ridotta.

Introduciamo come prima cosa la nozione di riducibilit\`a. 
\begin{block}[Definizione]
    Sia $U$ un tipo, e $t$ un termine di tipo $U$. Definiamo induttivamente il
    suo insieme di termini riducibili $\red{U}$ come:
    \begin{itemize}
        \item Se $U$ \`e atomico, $t$ \`e riducibile se e solo se \`e fortemente
            normalizzante.
        \item Se $T = V \rightarrow W$, $t$ \`e riducibile se e solo se per ogni
            termine riducibile $v$ di tipo $V$, il termine $tv$ \`e riducibile
            di tipo $W$.
    \end{itemize}
\end{block}

Osserviamo che sono termini riducibili tutte le variabili di tipo.

\begin{block}[Definizione]
    Diciamo che un termine $t$ \`e neutrale se \`e nella forma $uv$, dove $u$ e
    $v$ sono termini di tipo compatibile.
\end{block}

L'idea dietro alla neutralit\`a \`e che se $t$ \`e un termine neutrale e $v$ un
termine per cui $tv \conv_C u$, allora $u = t' v$ oppure $u=tv'$ dove $t'$ e $v'$
sono conversioni rispettivamente di $t$ e $v$. In particolare non ci sono
step di riduzione in cui $v$ o un suo sottotermine viene sostituito in una
variabile di $t$.

Dimostriamo ora che gli insiemi di riducibili godono di alcune propriet\`a, che
saranno utili a dimostrare il teorema di questa sezione e torneranno anche utili
nello studio della normalizzazione nel sistema F.

\begin{block}[Proposizione]
    \begin{nlist}[CR1]
        \item Se $t\in \red{U}$, allora $t$ \`e fortemente normalizzante.
        \item Se $t\in \red{U}$ e $t\conv u$, allora $u\in\red{U}$.
        \item Se $t$ \`e neutrale di tipo $U$ e per ogni $t'$ per cui $t\conv_C
            t'$ vale che $t'\in\red{U}$, allora anche $t\in\red{U}$.
    \end{nlist}
\end{block}

Notiamo che la prima propriet\`a indica che essere riducibile implica l'essere
fortemente normalizzante. La seconda propriet\`a permette di conoscere la
riducibilit\`a di un termine data la riducibilit\`a di un termine precedente in
una catena di conversioni. Infine la terza propriet\`a permette di conoscere la
riducibilit\`a di un termne data quella delle sue conversioni.

\begin{proof}
    La dimostrazione \`e per induzione sulla complessit\`a dei tipi.

    Iniziamo dal caso in cui il tipo $U$ sia una variabile di tipo. Allora,
    poich\`e i riducibili di tipo $U$ sono i termini fortemente normalizzanti,
    (CR1) \`e una tautologia. Se un termine $t$ \`e fortemente normalizzante e
    $t\conv t'$, allora anche $t'$ \`e fortemente normalizzante perch\'e vale
    che $\nu(t')<\nu(t)$. Dunque anche (CR2) vale. Per (CR3), sia $t$ un termine
    neutrale per cui tutte le conversioni sono fortemente normalizzanti. Allora
    vale che $\nu(t)$ \`e pari al massimo di $\nu(t')$ al variare di $t'$ tra le
    conversioni di $t$, e dunque \`e finito.

    Consideriamo adesso il tipo $U\rar V$.  Supponiamo che $t$ sia un riducibile
    di tale tipo, e supponiamo che $x$ sia una variabile di tipo $U$. Poich\`e
    $x$ \`e neutrale e normale, essa \`e riducibile. Allora anche $tx$ \`e
    riducibile, per la definizione di riducibilit\`a sul tipo freccia.
    Osserviamo ora che $\nu(t)\leq \nu(tx)$, infatti ad ogni catena di
    riduzioni $t\conv t_1 \conv\cdots \conv t_n$ possiamo associare la
    catena $tx \conv t_1 x \conv\cdots \conv t_n x$. Poich\`e $\nu(tx)$ \`e
    finito, $t$ \`e fortemente normalizzante, e (CR1) \`e dimostrato.

    Se consideriamo un termine $t$ di tipo $U\rar V$ riducibile e un termine
    $t'$ tale che $t\conv t'$, allora per ogni termine $u$ di tipo $U$ vale che
    $tu\conv t'u$. Utilizzando l'ipotesi induttiva di (CR2) su $V$, otteniamo
    che anche $t'u$ \`e riducibile. Per cui anche $t'$ \`e riducibile e (CR2)
    vale.

    Supponiamo ora di avere $t$ neutrale per cui tutte le sue conversioni siano
    riducibili. Sia $u$ un riducibile di tipo $U$. L'obiettivo \`e mostrare che
    $tu$ \`e riducibile. Per (CR1) per $U$, gi\`a sappiamo che $u$ \`e
    fortemente normalizzante, per cui possiamo ragionare per induzione su
    $\nu(u)$. Notiamo che per neutralit\`a di $t$, $tu$ si pu\`o convertire
    soltanto in $t'u$, con $t'$ conversione di $t$, oppure in $tu'$, con $u'$
    conversione di $u$. Nel primo caso sappiamo che $t'$ \`e riducibile, e
    dunque anche $t'u$ lo \`e. Nel secondo caso possiamo osservare che $\nu(u')
    < \nu(u)$ e dunque per induzione otteniamo nuovamente che $t'u$ \`e
    riducibile. Poich\`e $tu$ si converte soltanto a riducibili, \`e anch'esso
    riducibile per ipotesi induttiva di (CR3). 
\end{proof}

A questo punto dimostriamo un utile lemma:
\begin{block}[Lemma]
    Se per tutti i termini riducibili $u$ di tipo $U$, il termine $v\sub{u}{x}$
    \`e riducibile, allora anche il termine $\l x.v$ \`e riducibile.
\end{block}

\begin{proof}
    Supponiamo che $v\sub{u}{x}$ sia di tipo $V$, allora il termine $\l x.v$ \`e
    di tipo $U\rar V$. Allora vogliamo dimostrare che per ogni termine
    riducibile $u$ di tipo $U$ vale che $(\l x.v)u$ \`e riducibile. Notiamo che
    $v$ \`e riducibile, infatti $x$ \`e riducibile di tipo $U$.

    Ragioniamo per induzione sulla somma $\nu(v)+\nu(u)$ per dimostrare che
    tutte le conversoni di $(\l x.v)u$ sono riducibili. Il termine $(\l x.v)u$
    si pu\`o convertire in:
    \begin{itemize}
        \item $v\sub{u}{x}$, che \`e riducibile per ipotesi.
        \item $(\l x. v')u$, con $v'$ conversione di $v$. Allora si ha che $v'$
            \`e riducibile per (CR2), e vale $\nu(v')<\nu(v)$ e quindi per
            ipotesi induttiva $\l x. v'$ \`e riducibile.
        \item $(\l x. v)u'$, con $u'$ conversione di $u$. In questo caso,
            similmente a prima, $u'$ \`e riducibile, e vale $\nu(v')<\nu(v)$.
            Nuovamente $(\l x. v)u'$ \`e anch'esso riducibile per ipotesi
            induttiva.
    \end{itemize}
    Concludiamo per (CR3), che assicura che $\l x.v$ sia dunque riducibile.
\end{proof}

Adesso si dimostra una versione pi\`u forte del teorema principale.

\begin{block}[Proposizione]
    Sia $t$ un termine le cui variabili libere compaiono tra $x_1, \dots, x_n =
    \underline{x}$, di tipo rispettivamente $U_1, \dots, U_n$. Siano $u_1,
    \dots, u_n = \underline{u}$ termini riducibili di tipo rispettivamente $U_1,
    \dots, U_n$. Allora il termine $t\sub{\underline{u}}{\underline{x}}$ \`e
    riducibile. Intediamo per $t\sub{\underline{u}}{\underline{x}}$ la
    sostituzione $t\sub{u_1}{x_1}\cdots\sub{u_n}{x_n}$.
\end{block}

\begin{proof}
    Per induzione sulla complessit\`a di $t$:
    \begin{itemize}
        \item Se $t=x_i$, allora la tesi \`e banalmente vera.
        \item Se $t=wv$, allora per l'ipotesi induttiva $w\sub{\underline{u}}
            {\underline{x}}$ e $v\sub{\underline{u}} {\underline{x}}$ sono
            riducibili. Ne consegue che $t\sub{\underline{u}}{\underline{x}} =
            w\sub{\underline{u}} {\underline{x}} v\sub{\underline{u}}
            {\underline{x}}$ \`e riducibile.
        \item Se $t=\l y. w$ di tipo $V\rar W$, allora per ipotesi induttiva,
            $t\sub{\underline{u}} {\underline{x}} \sub{v}{y}$ \`e riducibile per
            tutti i termini $v$ di tipo $V$. Allora per il lemma \deb{quale
            lemma?} si ottiene che $\l y. w\sub{\underline{u}}{\underline{x}}$
            \`e riducibile.
    \end{itemize}
\end{proof}

La dimostrazione del teorema di normalizzazione forte segue dall'ultima
proposizione ponendo $\underline{u} = \underline{x}$.


\subsection{Rappresentabilit\`a per il Tipato Semplice}

All'interno del $\l$-calcolo tipato semplice \`e possibile rappresentare i
numeri naturali con gli stessi numerali presentati per il caso non tipato.
Tuttavia, la scelta del tipo per le variabili che vi compaiono non \`e unica.
Infatti per ogni tipo $U$ possiamo costruire per ogni naturale $n$ il
corrispondente numerale
\[
    \overline{n} = \l f^{U\rar U} .\l x^U. f^n x
\]
di tipo $\tint = (U\rar U) \rar U \rar U$. Avendo a disposizione i numerali,
possiamo definire le funzioni rappresentabili in modo identico a quanto fatto
con il $\l$-calcolo tipato semplice.

Possiamo associare dei tipi anche ai termini che avevamo usato nel $\l$-calcolo
semplice per rappresentare la somma e la moltiplicazione, infatti 
\[
    A = \l p^\tint q^\tint f^{U\rar U}x^U. (pf)(qfx)
\]
\`e la versione tipata per l'addizione e 
\[
    M = \l p^\tint q^\tint f^{U\rar U}x^U. q (p f) x
\]
lo \`e per la moltiplicazione.

Possiamo dare un ulteriore esempio di funzione rappresentabile, che \`e quella
corrispondente all'\textit{if/then/else}, ovvero la funzione condizionale
$f(x,y,z)$ che vale $y$ se $x$ \`e non nullo e vale $z$ altrimenti. Essa \`e
rappresentata dal termine
\[
    C = \l p^\tint q^\tint r^\tint f^{U\rar U} x^U. p (\l y^U. qfx)(rfx)
\]

Come importante conseguenza della propriet\`a di normalizzazione forte si ha una
conseguente riduzione della classe delle funzioni rappresentabili, che devono
essere per forza totali. Inoltre non tutte le funzioni totali sono
rappresentabili, infatti se cos\`i fosse sarebbe possibile trovare una loro
enumerazione con i termini del calcolo, ma ci\`o \`e assurdo perch\'e l'insieme
delle (codifiche delle) funzioni totali non \`e ricorsivamente enumerabile.

Per esempio il termine che avevamo usato per rappresentare l'esponenziazione non
pu\`o essere tipato; infatti l'applicazione di un numerale a un altro numerale,
ovvero un termine di tipo $\tint$ a un altro termine di tipo $\tint$, non \`e
permessa dalle regole del $\l$-calcolo tipato semplice.

Si pu\`o dire di pi\`u, perch\'e nessun termine pu\`o rappresentare
l'esponenziazione e pi\`u in generale vale il seguente teorema:

\begin{block}[Teorema]
    Le funzioni rappresentabili nel $\l$-calcolo tipato semplice sono
    esattamente le funzioni generate dalle costanti $0$ e $1$ e dalle funzioni
    di somma, moltiplicazione e condizionale.
\end{block}

Un verso \`e immediato, avendo gi\`a trovato i termini $A$, $M$ e $C$.
\deb{L'altro \`e da fare?}

\section{Il Sistema T di G\"odel}

Il grosso problema che rende in un certo senso limitante calcolo tipato semplice
\`e che i numerali non hanno un tipo canonico, e non \`e possibile definire
funzioni per ricorsione primitiva.  Tale calcolo ha dunque un'espressivit\`a
molto bassa.  Per ovviare a questo problema introduciamo una nuova variante del
calcolo, il sistema T di G\"odel, in cui vengono artificialmente inseriti tipi
per gli interi e le coppie di termini, insieme a nuove costruzioni che
rappresentano delle funzioni basilari su di essi.  Vedremo che con queste
semplici aggiunte il calcolo guadagna una forte potenza espressiva.

Per definire dunque il sistema T, estendiamo la definizione dei tipi e dei
termini del $\l$-calcolo tipato semplice. 
\begin{block}[Definizione]
    I tipi del sistema T sono definiti induttivamente come:
    \begin{itemize}
        \item $U_1, U_2, \dots$ sono tipi, detti variabili di tipo.
        \item Se $U$ e $V$ sono tipi, allora anche $(U\rar V)$ \`e un tipo.
        \item Se $U$ e $V$ sono tipi, allora anche $(U\times V)$ \`e un tipo.
        \item $\tint$ \`e un tipo atomico.
    \end{itemize}

    I termini del sistema T sono definiti induttivamente come:
    \begin{itemize}
        \item Per ogni tipo $U$, le variabili $x^U_1, x^U_2, \dots$ sono termini
            di tipo $U$.
        \item Se $t$ e $v$ sono termini di tipo rispettivamente $U\rar V$ e $U$,
            allora l'applicazione $(tv)$ \`e un termine di tipo $V$.
        \item Se $t$ \`e un termine di tipo $V$ e $x$ \`e una variabile di tipo
            $U$, allora l'astrazione $(\l x.  t)$ \`e un termine di tipo $U\rar
            V$.
        \item Se $u$ e $v$ sono termini di tipo rispettivamente $U$ e $V$,
            allora $\ang{u,v}$ \`e un termine di tipo $U\times V$.
        \item Se $t$ \`e un termine di tipo $U\times V$, allora $\pi^1 t$ e
            $\pi^2t$ sono termini di tipo rispettivamente $U$ e $V$.
        \item $O$ \`e un termine di tipo $\tint$.
        \item Se $t$ \`e un termine di tipo $\tint$, allora anche $St$ \`e un
            termine di tipo $\tint$.
        \item Se $u$, $v$, e $t$ sono termini rispettivamente di tipo $U$,
            $U\rar \tint\rar U$ e $\tint$, allora $Ruvt$ \`e un termine di
            tipo $U$.
    \end{itemize}
\end{block}

Il significato che vorremmo assegnare ai nuovi termini \`e il seguente: il tipo
$U\times V$ corrisponde al tipo di una coppia formata da un termine $u$ di tipo
$U$ e un termine $v$ di tipo $V$ in quest'ordine. La coppia \`e rappresentata
dal termine $\ang{u,v}$; $\pi^1$ e $\pi^2$ sono le proiezioni.  Il termine $O$ e
il simbolo $S$ rappresentano rispettivamente lo zero e la funzione di
successore, e pertanto scriveremo il numerale relativo a $n$ come $S^nO$.
Inoltre $R$ \`e l'operatore di ricorsione primitiva, per cui $Ruv(St) =
v(Ruvt)t$, dove l'uguaglianza \`e intesa a meno di $\beta$-equivalenza.

Con l'introduzione dei nuovi termini occorre estendere le regole per la
conversione:
\begin{block}[Definizione]
    Un termine $u$ si converte a $v$ quando $v$ \`e ottenuto sostituendo in $u$
    un sottotermine $u'$ con un termine $v'$ tali che valga una delle seguenti:
    \begin{itemize}
        \item $u'=\pi^1\ang{w,t}$ e $v'=w$, per opportuni termini $w$ e $t$.
        \item $u'=\pi^2\ang{w,t}$ e $v'=t$, per opportuni termini $w$ e $t$.
        \item $u'= (\l x. w)t$ e $v' = w\sub{w}{x}$ dove $x$ \`e una variabile e
            $w$ e $t$ sono termini tali che la sostituzione $w\sub{w}{x}$ sia
            permessa.
        \item $u' = RwtO$ e $v'=w$, per opportuni termini $w$ e $t$.
        \item $u' = Rwt(Sn)$ e $v' = t(Rwtn)n$, per opportuni termini $w$, $t$ e
            $n$.
    \end{itemize}
\end{block}

Come negli altri calcoli si possono definire a questo punto la riduzione, la
forma normale, e la rappresentabilit\`a.

Come osservazione, notiamo che in generale non \`e vero che il termine
$\ang{\pi^1t, \pi^2t}$ si riduce al termine $t$, e anzi potrebbero essere
entrambi in forma normale e pertanto nemmeno $\beta$-equivalenti. 


\subsection{Normalizzazione Forte per il Sistema T}

Anche per il sistema T, come per il $\l$-calcolo tipato semplice, vale la
propriet\`a di normalizzazione forte. Lo scopo di questa sezione \`e appunto
quella di dimostrare il seguente teorema:
\begin{block}[Teorema]
    Tutti i termini del sistema T sono fortemente normalizzanti.
\end{block}

La dimostrazione \`e un adattamento di quella gi\`a vista per il tipato
semplice. Estendiamo dunque la definizione di termine riducibile e di termine
neutrale:
\begin{block}[Definizione]
    Sia $U$ un tipo, e $t$ un termine di tipo $U$. Definiamo induttivamente il
    suo insieme di riducibilit\`a $\red{U}$ come:
    \begin{itemize}
        \item Se $U$ \`e atomico, $t$ \`e riducibile se e solo se \`e fortemente
            normalizzante.
        \item Se $T = V \rightarrow W$, $t$ \`e riducibile se e solo se per ogni
            termine riducibile $v$ di tipo $V$, il termine $tv$ \`e riducibile
            di tipo $W$.
        \item Se $T = V \times W$, $t$ \`e riducibile se e solo se sia $\pi^1
            t$ che $\pi^2 t$ sono riducibili.
    \end{itemize}
\end{block}

\begin{block}[Definizione]
    Un termine si dice neutrale quando non \`e in nessuna delle seguenti forme:
    $\ang{u,v}$, $\l x. v$, $O$ o $S t$.
\end{block}

Anche con questa definizione di neutralit\`a vale l'osservazione fatta appena
sotto la definizione \deb{XXX}.

Con queste definizioni estese possiamo riproporre senza modifiche le propriet\`a
(CR1-3). Continua a valere la proposizione \deb{3.6??}, di cui dobbiamo
estendere la dimostrazione.

\begin{block}[Proposizione]
    Per tutti i riducibili del sistema T valgono le propriet\`a (CR1-3).
\end{block}

\begin{proof}
    Nonostante sia stato inserito un ulteriore tipo atomico, la dimostrazione
    fatta per essi continua a rimanere valida.

    Studiamo allora il tipo prodotto. Supponiamo che il termine $t$ di tipo
    $U\times V$ sia riducibile, il che significa che entrambe le sue proiezioni
    sono riducibili. Per ipotesi induttiva, $\pi^1 t$ \`e fortemente
    normalizzante. Similmente a quanto gi\`a fatto, notiamo che $\nu(t)\leq
    \nu(\pi^1 t)$ perch\'e ad ogni catena $t \conv t_1 \conv \cdots \conv t_k$
    possiamo associare la catena $\pi^1 t \conv \pi^1 t_1\conv \cdots \conv
    \pi^1 t_k$. Ne consegue che $\nu(t)$ \`e finito e questo dimostra (CR1).

    Per (CR2) osserviamo che se $t$ e $t'$ sono termini per cui $t \conv t'$,
    allora $\pi^1 t \conv \pi^1 t'$ e $\pi^2 t \conv \pi^2 t'$. Quindi see $t$
    \`e riducibile, allora lo sono anche le sue proiezioni e quindi, per ipotesi
    induttiva, lo sono anche le riduzioni delle proiezioni. Poich\`e $t'$ ha
    entrambe le proiezioni riducibili, \`e anch'esso riducibile.

    Infine sia $t$ un termine neutrale per cui tutte le sue conversioni sono
    riducibili.  Convertendo $\pi^1 t$, si pu\`o ottenere solo un termine della
    forma $\pi^1 t'$ con $t'$ conversione di $t$, in quanto $t$ \`e neutrale e
    non pu\`o essere una coppia. Allora $t'$ \`e riducibile e quindi anche
    $\pi^1 t'$ lo \`e. Ma questo vuol dire che tutte le conversioni del termine
    neutrale $\pi^1 t$ sono riducibili, che implica che anche $\pi^1 t$ \`e
    riducibile. Ripetendo il ragionamento con la seconda proiezione si dimostra
    la riducibilit\`a di $t$ e quindi anche (CR3).
\end{proof}

Notiamo che $O$ \`e un termine di tipo atomico in forma normale, e pertanto \`e
riducibile. Inoltre se $t$ \`e un termine di tipo $\tint$ riducibile (quindi
fortemente normalizzante) allora anche $St$ \`e riducibile. Infatti vale che
$\nu(St)=\nu(t)$.

Dimostriamo ora una coppia di lemmi simili al lemma \deb{Lemma??}.

\begin{block}[Lemma]
    Se $u$ e $v$ sono riducibili, anche $\ang{u,v}$ \`e riducibile.
\end{block}

\begin{proof}
    Ragioniamo per induzione sulla somma $\nu(u)+\nu(v)$ per dimostrare che
    $\pi^1\ang{u,v}$ si converte a soli termini riducibili, e quindi \`e
    anch'esso riducibile. Tale termine si pu\`o convertire in:
    \begin{itemize}
        \item $u$, che \`e riducibile.
        \item $\pi^1\ang{u',v}$ con $u'$ conversione di $u$. In questo caso
            abbiamo che $u'$ \`e riducibile per (CR2), e quindi poich\`e
            $\nu(u')<\nu(u)$ otteniamo che per ipotesi induttiva la
            riducbilit\`a di $\pi^1\ang{u',v}$.
        \item $\pi^1\ang{u,v'}$, con $v'$ conversione di $v$. Questo caso \`e
            identico al precedente.
    \end{itemize}

    Ripetendo i passaggi precedenti con $\pi^2\ang{u,v}$, otteniamo che la
    coppia $\ang{u,v}$ \`e riducibile.
\end{proof}

\begin{block}[Lemma]
    Se $u$, $v$ e $t$ sono termini riducibili, allora, se i tipi dei
    sottotermini ne permettono la costruzione, anche $Ruvt$ \`e un termine
    riducibile.
\end{block}

\begin{proof}
    Di nuovo ragioniamo per induzione per ottenere che tutte le conversioni del
    termine $Ruvt$ sono riducibili per poi concludere con (CR3). In questo caso
    l'induzione viene fatta su $\nu(u) + \nu(v) + \nu(t) + l(t)$, dove $l(t)$
    indica il numero di simboli che appaiono nella forma normale di $t$.

    Il termine $Ruvt$ si converte in:
    \begin{itemize}
        \item $Ru'v't'$, con $u'$, $v'$ e $t'$ riduzioni rispettivamente di $u$,
            $v$ e $t$. In questo caso vale che $\nu(u') + \nu(v') + \nu(t')
            < \nu(u) + \nu(v) + \nu(t)$ e $l(t)=l(t')$. Si pu\`o quindi usare
            l'ipostesi induttiva per concludere che $R u'v't'$ \`e riducibile.
        \item $u$, riducibile per ipotesi. Questo accade quando $t=O$. 
        \item $v(Ruvw)w$, dove $t=Sw$. In questo caso avevamo gi\`a osservato
            che $\nu(t) = \nu(w)$, ma vale anche che $l(w) < l(w)$. L'ipotesi
            induttiva dice dunque che $Ruvw$ \`e riducibile. Poich\`e anche $v$
            e $w$ sono riducibili, per definizione di riducibilit\`a del tipo
            freccia anche $v(Ruvw)w$ \`e riducibile.
    \end{itemize}
    Concludiamo che $Ruvt$ \`e riducibile.
\end{proof}

Occorre a questo punto estendere la \deb{Proposizione??} con ulteriori casi per
gestire i termini introdotti nel sistema T.

\begin{proof}
    \begin{itemize}
        \item Se $t = \pi^1 w$, allora per ipotesi induttiva
            $w\sub{\overline{u}} {\overline{x}}$ \`e riducibile. Per cui anche 
            $\pi^1 (w\sub{\overline{u}} {\overline{x}}) = t \sub{\overline{u}}
            {\overline{x}}$ \`e riducibile.
        \item Se $t = \pi^1 w$, allora il caso \`e identico al precedente.
        \item Se $t = \ang{v,w}$, allora per ipotesi induttiva
            $v\sub{\overline{u}} {\overline{x}}$ e $w\sub{\overline{u}}
            {\overline{x}}$ sono riducibili. La tesi qui si ha come conseguenza
            del \deb{Lemma pi\`u su}.
        \item Se $t=O$, allora abbiamo gi\`a notato che \`e riducibile.
        \item Se $t = Sw$, abbiamo che se $w\sub{\overline{u}} {\overline{x}}$
            \`e riducibile, allora $t\sub{\overline{u}} {\overline{x}}$ \`e
            fortemente normalizzante e quindi riducibile.
        \item Se $t = Rvwp$, allora per ipotesi anche le sostituzioni nei tre
            paramentri sono riducibili, e quindi per il \deb{Lemma??}, anche il
            termine $t\sub{\overline{u}} {\overline{x}}$ \`e riducibile.
    \end{itemize}
\end{proof}

Come nel caso del calcolo tipato semplice, anche in questo caso abbiamo il
teorema come corollario dell'ultima proposizione.

\subsection{Rappresentabilit\`a nel Sistema T}

Prima di studiare risultati generali sulla rappresentabilit\`a di funzioni nel
sistema T di G\"odel, mostriamo qualche esempio di funzione rappresentabile.

La somma pu\`o essere rappresentata dal termine
\[
    A = \l p^\tint q^\tint. Rp (\l x^\tint y^\tint. Sx) q.
\]
Infatti vediamo che soddisfa la definizione ricorsiva della somma:
\begin{gather*}
    ApO \conv R p (\l x^\tint y^\tint. Sx) O \conv p
\end{gather*}
e 
\begin{gather*}
    Ap(Sq) \conv R p (\l x^\tint y^\tint. Sy) (Sq) \conv \\ (\l x^\tint y^\tint.
    Sy)(R p (\l x^\tint y^\tint. Sy) q) q \conv \\
    S (A pq)
\end{gather*}

Inoltre nel sistema T \`e tipabile anche l'esponenziazione, con il termine
\[
    E = \l p^\tint q^\tint . R (SO) (\l x^\tint y^\tint Mpy) q
\]
dove $M$ \`e il termine che rappresenta la moltiplicazione. In modo simile \` e
possibile rappresentare ogni funzione ricorsiva primitiva. Infatti, dato un
termine $H$ che rappresenta una funzione $h\colon\N\times\N\rar\N$, allora il
termine
\[
    F = \l p^\tint . R \overline{n} (\l x^\tint y^\tint Hxy) p
\]
rappresenta la funzione $f$ definita con $f(0) = n$ e $f(k+1) = h(f(k),k)$.
\deb{Dimostro?}

Notiamo che per la ricorsione primitiva abbiamo utilizzato il simbolo $R$
soltanto istanziato sul tipo $\tint$, infatti nei casi che abbiamo visto i suoi
primi due argomenti sono sempre di tipo $\tint$ e $\tint\rar\tint\rar\tint$.
La definizione del sistema T permette di stanziare $R$ su tipi pi\`u complessi,
e ci\`o porta ad avere ulteriori funzioni rappresentabili. Per esempio la
funzione di Ackermann \deb{(che faccio vedere esplicitamente?)}.

Nel seguito daremo risultati pi\`u generali, e caratterizzeremo la classe di
funzioni rappresentabili nel sistema T. Diamo prima una definizione fondamentale
per tale studio:
\begin{block}[Definizione]
    Data una teoria $T$ nel linguaggio dell'aritmetica, una funzione
    $f\colon\N\rar\N$ si dice dimostrabilmente totale in $T$ se esiste un
    predicato $\phi$ di complessit\`a $\Sigma^0_1$ tale che vale $\phi(n,m)$ se
    e solo se $f(n)=m$ e $T\vdash \forall n\ \exists m\ \phi(n,m)$.
\end{block}

Notiamo che nel caso delle funzioni calcolabili, una tale formula $\Sigma^0_1$
esiste sempre, e si pu\`o costruire tramite la funzione universale di Kleene.

Lo scopo del resto della sezione \`e quello di dimostrare il seguente teorema:

\begin{block}[Teorema]
    Le funzioni rappresentabili nel sistema T sono tutte e sole le funzioni
    dimostrabilmente totali nell'aritmetica di Peano.
\end{block}

Una delle due implicazioni segue dalla dimostrazione di normalizzazione forte, e
la racchiudiamo nella prossima proposizione.

\begin{block}[Proposizione]
    Le funzioni rappresentabili nel sistema T sono dimostrabilmente totali
    nell'aritmetica di Peano.
\end{block}
\begin{proof}
    Supponendo che esista un termine $t$ di tipo $\tint\rar\tint$ per cui
    $t\overline{n}$ si riduce a $\overline{m}$ ogniqualvolta valga $m = f(n)$,
    per dimostrare che $f$ \`e totale basta dimostrare che $t\overline{n}$ sia
    fortemente normalizzante per ogni naturale $n$. A meno di codificare i
    termini del calcolo con opportuni numeri naturali, detti numeri di G\"odel,
    per cui i predicati di conversione siano primitivi ricorsivi, possiamo
    sfruttare la dimostrazione della normalizzazione forte della sezione
    precedente. Infatti per ogni tipo, possiamo trovare un predicato che esprima
    la riducibilit\`a dei termini di tale tipo (lo si pu\`o fare induttivamente
    sulla complessit\`a dei tipi), e poi ragionare con tutte le induzioni che
    abbiamo gi\`a mostrato. Notiamo che tuttavia non \`e possibile trovare una
    formula che esprima uniformemente la riducibilit\`a di tutti i termini del
    sistema T. Per esprimere tali insiemi occorre fare uso di una
    quantificazione del secondo ordine, che ovviamente non \`e presente nelle
    aritmetiche del primo ordine.
\end{proof}

Per mostrare l'altra implicazione, estentendiamo i tipi del sistema T con un
nuovo tipo $\one$ e con un termine $\i$ di tipo $\one$. Ad ogni tipo $U$ di
questo sistema esteso associamo un tipo $|U|$ che sia o uguale a $\one$ o tale
che $\one$ non vi compaia. Il tipo $|U|$ \`e definito induttivamente con le
seguenti regole:
\begin{itemize}
    \item Se $U= \one \times V$, allora $|U|=|V|$.
    \item Se $U= V \times \one$, allora $|U|=|V|$.
    \item Se $U= \one \rar V$, allora $|U|=|V|$.
    \item Se $U= V \rar \one$, allora $|U|=\one$.
    \item Se $U=V\times W$, con n\`e $V$ n\`e $W$ pari a $\one$ allora $|U|=|V|
        \times |W|$.
    \item Se $U=V\rar W$, con n\`e $V$ n\`e $W$ pari a $\one$ allora $|U|=|V|
        \rar |W|$.
    \item Se $U$ \`e un tipo atomico, allora $|U|=U$.
\end{itemize}

Definiamo inoltre una mappa $\flat$ dalle formule dell'aritmetica (scritte senza
la disgiunzione) ai tipi del sistema T esteso come segue:
\begin{align*}
    \flat(\bot) &=\one;\\
    \flat(s=t) &= \one;\\
    \flat(\exists x \phi) &= |\tint \times \flat(\phi)|;\\
    \flat(\forall x \phi) &= |\tint \rar \flat(\phi)|;\\
    \flat(\phi \land \psi) &= |\flat(\phi) \times \flat(\psi)|;\\
    \flat(\phi \rar \psi) &= |\flat(\phi) \times \flat(\psi)|.\\
\end{align*}

La definizione per i casi con i quantificatori \`e legata all'idea che una
formula del tipo $\forall x\ \phi$ dove la quantificazione universale viene
relativizzata ai soli numeri naturali si scriverebbe come $\forall x\
(\text{int}(x) \rar \phi)$. In modo equivalente la formula $\exists x\ \phi$ si
riscriverebbe come $\exists x\ (\text{int}(x) \land \phi)$, dove $\text{int}$
esprime il predicato di appartenenza ai numeri naturali.

Definiamo ora la realizzabilit\`a. Si dice che un termine chiuso uguale a $\i$ o
in cui $\i$ non compare $M$ di tipo $\flat(\phi)$ realizza una formula chiusa
$\phi$ nelle seguenti situazioni:
\begin{itemize}
    \item $M=\i$ e $\phi$ \`e la formula $s=t$ e $s$ e $t$ rappresentano lo
        stesso numerale;
    \item $\phi$ \`e la formula $\forall x\ \phi$ e $M\overline{n}$ realizza
        $\phi\sub{\overline{n}}{x}$ per tutti gli $n$.
    \item $\phi$ \`e la formula $\exists x\ \phi$ e $\pi^1M$ si riduce a
        $\overline{n}$ e $\pi^2M$ realizza $\phi\sub{\overline{n}}{x}$ per
        qualche intero $n$.
    \item $\phi$ \`e la formula $\psi\land\eta$ e $\pi^1M$ realizza $\psi$ e
        $\pi^2M$ realizza $\eta$.
    \item $\phi$ \`e la formula $\psi \rar \eta$ e il termine $MN$ realizza
        $\eta$ per tutti i termini $N$ che realizzano $\psi$.
\end{itemize}

Diciamo inoltre che $M$ realizza un giudizio $\Gamma \vdash\phi$ con
$\Gamma=\setof{\gamma_1,\dots,\gamma_n}$ se $M$ realizza la formula
$\gamma_1\rar\cdots\rar\gamma_n\rar \phi$. Una formula si dice realizzabile se
esiste un termine che la realizza.

Notiamo che non esiste alcun termine che realizzi $\bot$.

Dimostriamo ora il seguente importante teorema:
\begin{block}[Teorema]
    Ogni giudizio dimostrabile nell'aritmetica di Heyting \`e realizzato da un
    termine del sistema T.
\end{block}
\begin{proof}
    L'idea \`e quella di procedere induttivamente, dimostrando prima che gli
    assiomi dell'aritmetica di Heyting sono realizzabili, e poi che avendo a
    disposizione dei termini che realizzano le premesse delle regole della
    deduzione naturale, \`e possibile costruire un termine che ne realizzi la
    conclusione.

    Gli assiomi per l'uguaglianza sono realizzabili, infatti $\forall x(x=x)$
    \`e realizzato dal termine $\i$, cos\`i come l'assioma $\forall x\forall y
    (x=y)\rar(y=x)$. 
    L'assioma di Peano $\forall x (Sx=O\rar \bot)$ \`e sempre realizzato da $\i$
    perch\'e la formula atomica $Sx=O$ non \`e realizzabile.

    Mostriamo ancora la realizzabilit\`a dell'assioma di induzione. Se
    $|\phi|=\one$, allora l'assioma \`e realizzato da $\i$. In caso contrario,
    sia $t$ un termine che realizza il passo induttivo $\forall x(\phi(x) \rar
    \phi(Sx)$ e sia $u$ un termine che ralizza il passo base $\phi(O)$. Si ha
    allora che per ogni $n>0$, il termine
    \[
        t\overline{n-1}(t \overline{n-2}(\cdots t \overline{1}( t \overline{0} u
        )\cdots))
    \]
    realizza $\phi(\overline{n})$. Utilizziamo dunque il simbolo di ricorsione
    per definire il termine $v = \l pqn. Rpqn$ che realizza l'assioma di
    induzione.

    Completiamo la dimostrazione mostrando che i giudizi dimostrabili sono
    realizzabili. Supponiamo che $\Gamma = \setof{\gamma_1, \dots , \gamma_k}$
    con $|\gamma_i| = U_i$ per tutti gli indici $i$ e che le variabili libere in
    $\Gamma$ siano $a_1, \dots, a_l$. Supponiamo inoltre che l'ultimo passo
    della dimostrazione sia l'introduzione della congiunzione, ovvero che
    termini con
    \[
        \begin{prooftree}
            \hypo{\Gamma\vdash \phi}
            \hypo{\Gamma\vdash \psi}
            \infer2{\Gamma\vdash \phi\land\psi}
        \end{prooftree}.
    \]
    Per ipotesi induttiva esistono due termini $t$ e $v$ che realizzano
    rispettivamente $\Gamma \vdash\phi$ e $\Gamma \vdash\psi$. Allora il termine
    $\l \overline{x}. \l \overline{y}. \ang{t\overline{x} \overline{y},v
    \overline{x} \overline{y}}$ realizza $\Gamma \vdash \phi \land \psi$, dove
    $\overline{x}$ \`e un vettore di $l$ variabili di tipo $\tint$ e
    $\overline{y}$ \`e un vettore di $k$ variabili di tipo $U_1, \dots, U_k$.

    Se supponiamo invece che l'ultimo passo sia un'eliminazione del
    quantificatore universale, ovvero
    \[
        \begin{prooftree}
            \hypo{\Gamma\vdash \forall z \phi}
            \infer1{\Gamma\vdash \phi\sub{b}{z}}
        \end{prooftree}
    \]
    con $z$ variabile libera in $\phi$, allora per ipotesi induttiva esiste un
    termine $t$ che rappresenta il giudizio in ipotesi. Sia $\l \overline{x}. v$
    il termine che rappresenta $b$, intendendo che le variabili libere di $t$
    compaiano fra le $a_i$. Allora $\l \overline{x}\overline{y}. t\overline{x}
    \overline{y}v$ rappresenta il giudizio di tesi.
    Le altre regole della deduzione naturale si trattano in modo simile.
\end{proof}

Osserviamo che la dimostrazione del teorema precedente fornisce una costruzione
esplicita dei termini che realizzano le formule dimostrabili, data la loro
dimostrazione.

A questo punto possiamo concludere la dimostrazione del teorema principale.
\begin{block}[Proposizione]
    Le funzioni dimostrabilmente totali nell'aritmetica di Peano sono
    rappresentabili nel sistema T.
\end{block}
\begin{proof}
    Notiamo che poich\`e le formule $\Pi^0_2$ dimostrabili in Peano sono
    esattamente quelle dimostrabili in Heyting, basta dimostrare la
    proposizione relativamente al caso intuizionista. Sia allora $f$ una
    funzione dimostrabilmente totale.
    Per ipotesi abbiamo dunque una formula $\Sigma^0_1$, sia essa $\phi$, tale
    che $\text{HA} \vdash \forall n\ \exists m\ \phi(n,m)$ e $\phi(n,m)$ \`e
    vera quando $f(n)=m$. Per la proposizione \deb{XXX}, esiste un termine $M$
    che realizza tale formula. Dunque per ogni naturale $n$, $M\overline{n}$
    realizza la formula $\exists m\ \phi(\overline{n}, m)$. Si ha qundi che
    $\pi^1(M\overline{n})$ si riduce a un numerale $\overline{m}$ e che
    $\pi^2(M\overline{n})$ realizza $\phi(\overline{n}, \overline{m})$. Diciamo
    che il termine $\l x. \pi^1 (Mx)$ rappresenta $f$, infatti $\phi(
    \overline{n}, \overline{m})$ \`e una formula vera, e quindi $f(n)=m$.
\end{proof}

\section{Il sistema F}

In questa sezione introduciamo un'ulteriore variante del $\l$-calcolo tipato
detta sistema F. Essa mantiene e anzi estende l'espressivit\`a del sistema T di
G\"odel e allo stesso tempo evita soluzioni ad hoc come l'inserimento esplicito
fra i tipi di un tipo $\tint$. Nel sistema F vedremo che esiste comunque un tipo
corrispondente ai numeri naturali, ma la sua costruzione \`e assai pi\`u
generale Il sistema permette anche, fra le tante cose, di definire tipi coppia e
tipi unione oppure tipi corrispondenti a liste o alberi. La chiave per fare
questo \`e l'introduzione di una quantificazione sui tipi.

\begin{block}[Definizione]
    I tipi del sistema F sono definiti induttivamente come:
    \begin{itemize}
        \item $U_1, U_2, \dots$ sono tipi, detti variabili di tipo o anche tipi
            atomici.
        \item Se $U$ e $V$ sono tipi, allora anche $(U\rar V)$ \`e un tipo.
        \item Se $X$ \`e una variabile di tipo e $U$ \`e un tipo, allora anche
            $\P X. U$ \`e un tipo.
    \end{itemize}
\end{block}

Avendo una sorta di quantificazione \`e utile avere anche la distinzione tra
occorrenze libere e legate di variabili di tipo. Un'occorrenza di una variabile
di tipo $X$ \`e legata se $X$ compare in una porzione del tipo nella forma $\P
X. U$.

\begin{block}[Definizione]
    I termini del sistema F si definiscono induttivamente come:
    \begin{itemize}
        \item Per ogni tipo $U$, le variabili $x^U_1, x^U_2, \dots$ sono termini
            di tipo $U$.
        \item Se $t$ e $v$ sono termini di tipo rispettivamente $U\rar V$ e $U$,
            allora l'applicazione $(tv)$ \`e un termine di tipo $V$.
        \item Se $t$ \`e un termine di tipo $V$ e $x$ \`e una variabile di tipo
            $U$, allora l'astrazione $(\l x.  t)$ \`e un termine di tipo $U\rar
            V$.
        \item Se $u$ \`e un termine di tipo $U$ e $X$ \`e una variabile di tipo
            che non occorre libera nei tipi delle variabili libere di $u$,
            allora $\L X. u$ \`e un termine di tipo $\P X.U$. 
        \item Se $t$ \`e un termine di tipo $\P X. U$ e $V$ \`e un tipo allora
            $tV$ \`e un termine di tipo $U\sub{V}{X}$, che indica il termine $U$
            in cui sono state sostituite le occorrenze libere di $X$ con $V$,
            con l'usuale attenzione per la cattura di variabili.
    \end{itemize}
\end{block}

Occorre ancora definire il comportamento dei nuovi termini sotto l'azione della
conversione.
\begin{block}[Definizione]
    Un termine $u$ si converte a $v$ quando $v$ \`e ottenuto sostituendo in $u$
    un sottotermine $u'$ con un termine $v'$ tali che valga una delle seguenti:
    \begin{itemize}
        \item $u'= (\l x. w)t$ e $v' = w\sub{w}{x}$ dove $x$ \`e una variabile e
            $w$ e $t$ sono termini tali che la sostituzione $w\sub{w}{x}$ sia
            permessa.
        \item $u' = (\L X.v)U$ e $v'=v\sub{U}{X}$, con $v$ un termine, $U$ un
            tipo e $X$ una variabile di tipo.
    \end{itemize}
\end{block}

Attraverso l'astrazione sui tipi, o generalizzazione, possiamo comporre
programmi che operano uniformemente su dati di differenti tipi. L'esempio pi\`u
facile \`e dato dal termine identit\`a $\L X. \l x^X. x$, di tipo $\P X. X$.
Dato un termine $u$ di tipo $U$, si ha che $(\L X. \l x^X. x)U$ ha tipo $U$ e si
riduce a $\l x^U.x$ e quindi $(\l X. \l x^X. x)Uu$ si riduce semplicemente a
$u$.

Altri tipi che possono essere costruiti corrispondo al tipo prodotto e il tipo
unione disgiunta. Per esempio un tipo prodotto tra $U$ e $V$ pu\`o essere
rappresentato nel sistema F dal tipo $U\times V = \P X. (U\rar V \rar X) \rar
X$. Possiamo scrivere un termine che produce una coppia, ovvero
\[
    \text{CPL} = \l x^U  y^V. \L X. \l p^{U \rar V\rar X}. puv
\]
e le conseguenti proiezioni
\begin{gather*}
    \pi^1 = \l x^{U\times V}. xU(\l y^U z^V.y) \\
    \pi^2 = \l x^{U\times V}. xV(\l y^U z^V.z)
\end{gather*}
rispettivamente sul primo e secondo fattore.

Mostriamo per esempio la riduzione di 
\begin{gather*}
    \pi^1 (\text{CPL}uv) \conv \\
    (\l x^{U\times V}. xU(\l y^U z^V.y))(\text{CPL}uv) \conv \\
    (\text{CPL}uv)U (\l y^U z^V.y) \conv \\
    (\L X. \l p^{U\rar V \rar X} puv)U (\l y^U z^V.y)  \conv \\
    (\l y^U z^V.y)uv \conv u.
\end{gather*}

Chiaramente tutti i termini precedenti possono essere generalizzati su $U$ e su
$V$.

Il tipo somma tra $U$ e $V$ \`e definito come il tipo $U+V = \P X. (U\rar X)
\rar (V\rar X) \rar X$ con il costruttore con la variabile di tipo $U$ come 
\[
    \text{UN1} = \l u^U. \L X. \l p^{U\rar X} q^{V\rar X}. pu
\]
e l'equivalente sulla variabile di tipo $V$ come 
\[
    \text{UN2} = \l v^V. \L X. \l p^{U\rar X} q^{V\rar X}. qv.
\]
Mostriamo anche un termine di eliminazione per il tipo unione, ovvero
\[
    D uvt = tU (\l x^U.u)(\l x^V.v)
\]
per cui vale la riduzione
\begin{gather*}
    Duv(\text{UN1}r) = (\L X. \l p^{U\rar X}q^{V\rar X}. pr) U (\l x^U.u)(\l
    x^V.v) \conv \\
    (\l p^{U\rar X}q^{V\rar X}. pr)(\l x^U.u)(\l x^V.v) \conv \\
    (\l x^U.u) r \conv u\sub{r}{x}
\end{gather*}
e l'altra equivalente $Duv(\text{UN2}r) \conv v\sub{r}{x}$.
L'idea intuitiva del tipo somma corrisponde alle union del linguaggio C, e il
termine $D$ serve per distinguere in quale dei due tipi l'ultimo parametro \`e
utilizzato.

La costruzione di questi due tipi \`e in realt\`a generalizzabile a qualunque
tipo di dato algebrico. Ne mostriamo un ultimo esempio, pi\`u chiaro. Supponiamo
di voler costruire un tipo relativo agli alberi binari in cui ogni nodo contiene
un dato di tipo $U$. L'albero \`e generato utilizzando due costruttori. Il
primo, che chiamiamo $E$, \`e l'albero vuoto. Il secondo, $R$, ha come parametri
il dato da mettere nella radice dell'albero e i due alberi figli della radice.
Se chiamassimo $X$ il tipo dell'albero binario, risulterebbe che i costruttori
avrebbero tipo rispettivamente tipo $X$ e $U \rar X\rar X \rar X$. Da qui
costruiamo l'effettivo tipo dell'albero
\[
    T = \P X. X \rar (U \rar X \rar X \rar X) \rar X.
\]
I due costruttori sono rappresentati dai termini:
\begin{gather*}
    E = \L X. (\l x^X y^{U \rar X \rar X \rar X}.x) \\
    R = \l r^U l^T r^T \L X. (\l x^X y^{U \rar X \rar X \rar X}.yr(lXxy)(rXxy))
\end{gather*}

Se $u_1, u_2,\dots$ sono termini di tipo $U$ un esempio di albero binario \`e 
\[
    Ru_1(Ru_2(Ru_4EE)E)(Ru_3EE).
\]

\`E possibile operare su queste strutture con funzioni definite con
pattern-matching. Per esempio se abbiamo un termine $f$ di tipo $U\rar V \rar V\rar V$
e un termine iniziale $v$ di tipo $V$, possiamo definire l'iteratore di visita
anticipata sull'albero $t$ come:
\[
    Ivft = tVv(\l n^U l^V r^V. f nlr.
\]
La funzione calcolata da $Ivf$ \`e tale che sull'albero nullo dia risultato $v$,
e sull'albero con nodo di valore $u$ e sottoalberi sinistro e destro $t_l$ e
$t_r$ ritorni $f u v_l v_r$, dove $v_l$ e $v_r$ sono i valori calcolati da $Ivf$
sui due sottoalberi.

Notiamo tuttavia che l'introduzione del sistema F porta con s\`e un difficolt\`a
nel lavorare per induzione sulla complessit\`a dei termini. Infatti nell'esempio
dell'identit\`a, il termine pu\`o essere istanziato su un qualunque tipo, e
dunque l'istanziazione non riduce la complessit\`a di un termine, ma
potenzialmente la pu\`o aumentare. Per esempio questo accade nel termine $(\L X.
\l x^X. x)(\P X. X)$. Nello studio del sistema F ci imbatteremo in problemi di
questo genere e presenteremo dei modi per aggirarli.

\subsection{Normalizzazione per il Sistema F}
Per dimostrare la normalizzazione forte nel sistema F, un primo tentativo pu\`o
essere quello di estendere la dimostrazione gi\`a fatta per il $\l$-calcolo
tipato semplice e per il sistema T. Questo per\`o non \`e possibile, perch\`e
nello spirito della definizione \deb{la definzione di riducibilit\`a}, vorremmo
provare a definire i riducibili di tipo $\P X. V$ come i termini $t$ tali che
per ogni tipo $U$ il termine $tU$ \`e riducibile di tipo $V\sub{U}{X}$. Questo
conduce a una definizione impredicativa, perch\`e per conoscere la
riducibilit\`a di un termine di tipo $V\sub{U}{X}$ occorre conoscere la
riducibilit\`a dei suoi sottotermini. Nel caso in cui per esempio si avesse $U =
\P X.V$, le dimostrazioni per induzione fallirebbero. Occorre dunque un
procedimento adatto ad aggirare il problema.

Come prima cosa, estendiamo la definizione di riducibilit\`a del calcolo tipato
semplice con i nuovi casi introdotti nel sistema F.
\begin{block}[Definizione]
    Un termine $t$ si dice neutrale se \`e in una delle seguenti forme: $x$,
    $vu$ o $vU$, in cui $x$ \`e una variabile, $v$ e $u$ sono termini e $U$ \`e
    un tipo.
\end{block}

A questo punto possiamo definire i candidati di riducibilit\`a. Essi sono
insiemi di termini di uno stesso tipo per cui valgono le tre propriet\`a che
avevamo dimostrato valere per i riducibili. L'idea quindi \`e quella di
costruire degli ulteriori insiemi di termini detti riducibili parametrici, la
cui costruzione induttiva sui tipi atomici e sui tipi freccia corrisponde a
quella data per i riducibili nel tipato semplice, e sui tipi della forma $\L
X.V$ corrisponde alla proposta fatta sopra, per\`o utilizzando come parametri,
al posto dei riducibili, dei generici candidati.

\begin{block}[Definizione]
    Un candidato di riducibilit\`a (o semplicemente candidato) di tipo $U$ \`e
    un insieme $\can{R}$ di termini di tipo $U$ per cui valgono:
    \begin{nlist}[CR1]
        \item Se $t\in\can{R}$ allora $t$ \`e fortemente normalizzante.
        \item Se $t\in\can{R}$ e $t'$ \`e un termine ottenuto da una riduzione
            di $t$, cio\`e $t\reduce t'$, allora $t'\in\can{R}$.
        \item  Se $t$ \`e neutrale, e per ogni conversione di uno step di $t$ si
            ottiene un termine $t'\in\can{R}$, allora anche $t\in\can{R}$.
    \end{nlist}
\end{block}

Definiamo una notazione semplice per i candidati di tipo freccia costruiti
esattamente come i riducibili del calcolo tipato semplice.
\begin{block}[Definizione]
    Se $\can{R}$ e $\can{S}$ sono insiemi di termini di tipo rispettivamente $U$
    e $V$, si definisce l'insieme $\can{R}\rightarrow\can{S}$ come l'insieme dei
    termini di tipo $U\rightarrow V$ per cui per ogni termine $u\in\can{R}$ si
    ha che $tu\in\can{S}$.
\end{block}

Occorre dimostrare che questi insiemi siano effettivamente dei candidati, e lo
facciamo nel seguente lemma.
\begin{block} [Lemma]
    Se $\can{R}$ e $\can{S}$ sono candidati per i tipi $U$ e $V$, allora
    $\can{R}\rightarrow\can{S}$ \`e candidato di tipo $U\rightarrow V$.
\end{block}
\begin{proof}
    Per mostrare (CR1) prendiamo $t\in\can{R}\rightarrow\can{S}$ e una variabile
    $x$ di tipo $U$. Poich\'e le variabili sono sia normali che che neutrali,
    $x\in \can{R}$ e quindi $tx\in\can{S}$. Inoltre $\nu(t)<\nu(tx)$, e quindi
    siccome $tx$ \`e fortemente normalizzante, anche $t$ lo \`e.

    Per (CR2),se $t\reduce t'$, per ogni $u \in \can{R}$ si ha che $tu\reduce
    t'u$. Usando la (CR2) su $\can{S}$, si ottiene che $t'u\in\can{S}$. Allora
    $t'\can{R}\rightarrow\can{S}$.

    Infine consideriamo $t$ neutrale di tipo $U\rightarrow V$ per cui per tutte
    le conversioni di uno step $t\reduce t'$ si ha che $t' \in
    \can{R}\rightarrow\can{S}$. Sia $u\in\can{R}$, e per induzione su $\nu(u)$
    dimostriamo che $tu$ si riduce in uno step a termini in $\can{S}$. Infatti
    poich\'e $t$ \`e normale, $tu$ si pu\`o ridurre solo a $t'u$ o a $tu'$ per
    opportuni termini $t'$ e $u'$. Ma il primo appartiene a $\can{S}$ perch\`e
    $t'\in\can{R}\rightarrow\can{S}$, e il secondo ci appartiene per ipotesi
    induttiva in quanto $\nu(u')<\nu(u)$. Per (CR3) su $\can{S}$ allora
    $tu\in\can{S}$. 
\end{proof}

Possiamo dunque definire cosa sono i riducibili parametrici:
\newcommand{\subrx}{\sub{\underline{\can{R}}}{\underline{X}}}
\begin{block} [Definizione]
    Sia $T[\underline{X}]$ un tipo con variabili libere in $\underline{X}$. Sia
    $\underline{U}$ un vettore di tipi della stessa lunghezza e siano $\can{R}$
    dei rispettivi candidati. Possiamo allora definire l'insieme
    $\red{T}\subrx$ di termini riducibili parametrici di tipo
    $T\sub{\underline{U}}{\underline{X}}$ nel modo seguente:
    \begin{nlist} [1]
        \item  Se $T=X_i$ per qualche indice $i$, allora
            $\red{T}\subrx=\can{R}_i$.
        \item Se $T=V\rightarrow U$, allora $\red{T}\subrx = \red{V}\subrx
            \rightarrow \red{W}\subrx$.
        \item Se $T=\Pi Y.W$, allora $\red{T}\subrx$ \`e l'insieme dei termini
            $t$ di tipo $\sub{\underline{U}}{\underline{X}}$ tali che per ogni
            tipo $V$ e per ogni candidato $\can{S}$ di tale tipo vale che $tV
            \in \red{W}\subrx\sub{\can{S}}{Y}$.
    \end{nlist}
\end{block}

Ci servir\`a nel seguito utilizzare induttivamente i riducibili parametrici come
parametri di altri riducibili parametrici. Nel prossimo lemma dimostreremo che
\`e possibile farlo in quanto i riducibili parametrici rispettano le propriet\`a
di candidati.
\begin{block} [Lemma]
    $\red{T}\subrx$ \`e un candidato di riducibilit\`a di tipo
    $T\sub{\underline{U}}{\underline{X}}$.
\end{block}
\begin{proof}
    Lo facciamo per induzione sulla complessit\`a del tipo $T$. Nel caso in cui
    $T$ \`e una variabile individuale, il teorema \`e una tautologia. Il caso in
    cui $T=V\rightarrow W$ lo abbiamo gi\`a fatto. Manca solo il caso in cui
    $T=\Pi Y.W$. 

    Verifichiamo (CR1). Sia $t\in \red{T}\subrx$, $V$ un tipo e $\can{S}$ un suo
    candidato. Allora $tV \in \red{W}\subrx\sub{\can{S}}{Y}$ per definizione.
    Usando l'ipotesi induttiva sul tipo $W$ si ha che $tV$ \`e fortemente
    normalizzante. Ma vale anche che $\nu(t)<\nu(tV)$. Quindi anche $t$ \`e
    fortemente normalizzante. 

    Per (CR2), supponiamo di avere $t\reduce t'$ con uno step di conversione.
    Allora, $tV\reduce t'V$, per cui $t'V \in \red{W}\subrx\sub{\can{S}}{Y}$ e
    quindi $t'\in \red{T}\subrx$.

    Infine, per (CR3), consideriamo $t$ un qualunque termine di tipo $T$
    neutrale. Supponiamo che per ogni $t'$ ottenuto dalla conversione di $t$ in
    un singolo step si abbia $t'$ riducibile parametrico. Allora per ogni tipo
    $V$ e relativo condidato $\can{S}$, le uniche conversioni di $tV$ sono della
    forma $tV\reduce t'V$. Usando l'ipotesi induttiva allora anche $tV$ \`e
    riducibile parametrico, e quindi si ha la tesi.
\end{proof}

Il prossimo lemma \`e utile per studiare il comportamento della riducibilit\`a
parametrica rispetto alle instanziazioni. Una cosa da notare \`e che affinch\`e
abbia senso il predicato $\red{T}\subrx \sub{\red{V}\subrx}{Y}$, occorre che
$\red{V}\subrx$ non sia soltanto un predicato, ma anche un effettivo insieme.
Notiamo anche che il principio di estensione ci permette di passare da predicati
a insiemi senza problemi.
\begin{block} [Lemmma]
    Sia $T$ un tipo con variabili libere $Y$ e $\underline{X}$ e $V$ un tipo.
    Siano $\underline{\can{R}}$ candidati per $\underline{X}$. Allora vale che
    $\red{T\sub{V}{Y}}\subrx= \red{T}\subrx \sub{\red{V}\subrx}{Y}$.
\end{block}
\begin{proof}
    Come prima, facciamo un'induzione sulla complessit\`a del tipo $T$. Per
    comodit\`a, usiamo l'abbreviazione $A=\red{V}\subrx$.

    Iniziamo con il caso in cui $T=Z$ \`e una variabile individuale diversa da
    $Y$. Allora vale che 
    \[
        \red{T\sub{V}{Y}}\subrx = \red{Z}\subrx = \red{Z}\subrx\sub{A}{Y}.
    \]

    Se invece $T=Y$ si ha che
    \[
        \red{T\sub{V}{Y}}\subrx = \red{V}\subrx = \red{Y}\subrx\sub{
            \red{V}\subrx}{Y}.
    \]

    Consideriamo ora il caso in cui $T=U\rightarrow W$. Vale che
    \begin{align*}
        \red{T\sub{V}{Y}}\subrx = 
        &\red{U\sub{V}{Y}\rightarrow W\sub{V}{Y}}\subrx =  \\
        &\red{U\sub{V}{Y}}\subrx \rightarrow \red{W\sub{V}{Y}}\subrx= \\
        &\red{U}\subrx\sub{A}{Y} \rightarrow\red{W}\subrx\sub{A}{Y} = \\
        &\red{U\rightarrow W}\subrx\sub{A}{Y}.
    \end{align*}

    Sia $Z$ come prima e svolgiamo il caso $T=\Pi Z. W$. Per definizione,
    $\red{\Pi Z. W\sub{V}{Y}}\subrx$ \`e l'insieme di tutti i termini $t$ per
    cui per ogni tipo $U$ e relativo candidato $\can{S}$ vale che
    \[
        tU\in \red{W\sub{V}{Y}}\subrx\sub{\can{S}}{Z} = 
        \red{W}\subrx\sub{\can{S}}{Z}\sub{A}{Y}.
    \]
    Dunque si ottiene la tesi per la definizione di $\red{\Pi Z.W}$.

    Infine il caso in cui $T=\Pi Y.W$ \`e semplice perch\`e $Y$ non occorre
    libera in $T$.
\end{proof}

I seguenti due teoremi sono gli equivalenti per questa dimostrazione dei lemmi
\deb{quei lemmi}.
\begin{block} [Lemma]
    Se per ogni tipo $V$ e per ogni candidato di riducibilit\`a $\can{S}$ per
    $V$ vale che $w\sub{V}{Y}\in\red{W}\subrx\sub{\can{S}}{Y}$, allora $\Lambda
    Y. w\in\red{\Pi Y.W}\subrx$.
\begin{proof}
    Dimostriamo per induzione su $\nu(w)$ che tutte le conversioni in uno step
    di $(\Lambda Y.w)V$ sono in $\red{W} \subrx\sub{\can{S}}{Y}$. Una
    conversione di tali conversioni pu\`o essere soltanto di due forme.  La
    prima \`e $(\Lambda Y.w')V$, con $w'$ una conversione di $w$. Ma allora
    $\nu(w')<\nu(w)$ e si usa l'ipotesi induttiva. La seconda forma \`e del tipo
    $w\sub{V}{Y}$, e questa \`e riducibile parametrico per ipotesi del lemma. 

    Allora la dimostrazione si conclude per (CR3).
\end{proof}
\end{block}

\begin{block} [Lemma]
    Se $t\in \red{\Pi Y.W}\subrx$, allora $tV\in \red{W\sub{V}{Y}}\subrx$ per
    ogni tipo $V$.
\begin{proof}
    Per la definizione di $\red{\Pi Y.W}$, per ogni candidato $\can{S}$ per $V$
    vale che $tV\in \red{W}\subrx\sub{\can{S}}{Y}$. Allora vale anche per
    $\can{S} = \red{V}\subrx$ e la tesi segue per il \deb{lemma XXX}.
\end{proof}
\end{block}

\begin{block} [Lemma]
    Se per ogni $u\in \red{U}\subrx$ vale che $v\sub{u}{x} \in \red{V}\subrx$,
    allora $\lambda x^U.v\in \red{U\rightarrow V}\subrx$.
\begin{proof}
    Dimostriamo per induzione su $\nu(u)+\nu(v)$ che tutte le conversioni di
    $(\lambda x^U.v)u$ sono riducibili parametrici. Infatti tale termine si
    converte in $(\lambda x^U.v)u'$, con $u'$ conversione di $u$, oppure in
    $(\lambda x^U.v')u$ con $v'$ conversione di $v$, oppure in $v\sub{u}{x}$. I
    primi due casi si risolvono con l'ipotesi induttiva, il terzo con l'ipotesi
    del lemma.

    Infine il teorema si dimostra per la propriet\`a (CR3).
\end{proof}
\end{block}

Utilizziamo ora l'idea di riducibilit\`a parametrica per definire i riducibili,
nello spirito che a posteriori potremo dire che i riducibili sono esattamente i
termini fortemente normalizzanti. In tal caso la definizione corrisponderebbe
con quella data per il $\l$-calcolo tipato semplice.
\begin{block} [Definizione]
    Un termine $t$ di tipo $T$ \`e riducibile se \`e in
    $\red{T}\sub{\underline{\can{SN}}}{\underline{X}}$ dove $X_1,\dots,X_m$ sono
    le variabili libere di $T$ e $\underline{\can{SN}}_i$ \`e l'insieme dei
    termini fortemente normalizzanti di tipo $X_i$.
\end{block}

Infine la proposizione che segue svolge lo stesso ruolo \deb{della proposizione
sul tipato semplice}.
\begin{block} [Proposizione]
    Sia $t$ un termine di tipo $T$ le cui variabili libere sono $x_1, \dots,
    x_n$ di tipo rispettivamente $U_1, \dots, U_n$. Supponiamo che le variabili
    libere dei tipi $T$ e di tutti gli $U_i$ siano $X_1, \dots, X_m$. Siano
    $\can{R}_1, \dots, \can{R}_m$ candidati di riducibilit\`a per dei tipi $V_1,
    \dots, V_m$ e siano inoltre $u_1, \dots, u_n$ termini di tipo
    $U_1\sub{\underline{V}}{\underline{X}}, \dots
    U_n\sub{\underline{V}}{\underline{X}}$ presi nei rispettivi
    $\red{U_i}\subrx$. Allora $t\sub{\underline{V}}{\underline{X}}
    \sub{\underline{u}}{\underline{x}} \in \red{T}\subrx$.
\newcommand{\subvx}{\sub{\underline{V}}{\underline{X}}}
\newcommand{\subut}{\sub{\underline{u}}{\underline{x}}}
\begin{proof}
    Per induzione sulla complessit\`a di $t$. Distinguiamo allora i seguenti
    casi:
    \begin{nlist}[i]
        \item $t=x_i$. Questo caso \`e una tautologia.
        \item $t=wv$, con $w$ di tipo $W\rightarrow T$ e $v$ di tipo $W$. Per
            ipostesi induttiva vale che $w\subvx\subut\in \red{W \rightarrow
            T}\subrx$ e che $v\subvx\subut \in \red{W}\subrx$. In questo caso la
            tesi segue dalla definizione di $\red{W\rightarrow T}$.
        \item $t=wS$. Questo caso \`e una diretta conseguenza del lemma \deb{XXX}
            sull'istanziazione. 
        \item $t=\Lambda Z. Y$. Questo discende dal lemma \deb{XXX} sulla
            generalizzazione.
        \item $t=\lambda y^P.w$. Questo caso si fa con il lemma \deb{XXX} sui tipi
            freccia.
    \end{nlist}
\end{proof}
\end{block}

Come corollari otteniamo il seguente risultato e il teorema di normalizzazione
forte per il sistema F.

\begin{block} [Proposizione]
    Tutti i termini del sistema F sono riducibili.
\begin{proof}
    Basta usare la proposizione precedente e prendere $\can{R}_i=\can{SN}_i$ e
    $u_i=x_i$ e concludere per (CR1).
\end{proof}
\end{block}

\begin{block} [Teorema]
    Tutti i termini del sistema F sono fortemente normalizzanti.
\end{block}


\section{Aritmetiche di Peano e di Heyting}

\begin{block}[Definizione]
    Il linguaggio per la logica del secondo ordine \`e lo stesso di quello del
    primo ordine con l'aggiunta per ogni naturale $n$ di un insieme numerabile
    di simboli $X_k^n$ con $k\in\N$, che chiameremo variabili di relazione.  
    
    Le formule atomiche sul linguaggio $L$ sono $\bot$, espressioni della forma
    $X^n(t_1, \dots, t_n)$, dove i $t_i$ sono termini del linguaggio, oppure
    espressioni della forma $R(t_1, \dots, t_n)$, dove $R$ \`e un simbolo di
    relazione in $L$ e i $t_i$ sono nuovamente termini.

    Le formule sono definite induttivamente come:
    \begin{itemize}
        \item Le formule atomiche.
        \item Date $\phi$ e $\psi$ formule, sono formule anche $\phi \land
            \psi$, $\phi \lor \psi$, $\phi \rar \psi$.
        \item Data una formula $\phi$ e una variabile $x$, sono formule anche
            $\forall x \phi$ e $\exists x \phi$.
        \item Data una formula $\phi$ e una variabile di relazione $X$, sono
            formule anche $\forall X \phi$ e $\exists X \phi$.
    \end{itemize}
    Si definisce inoltre la formula $\lnot \phi$ come $\phi \rar \bot$.
\end{block} 

In modo naturale possiamo definire il concetto di variabili libere in una
formula:
\begin{block}[Definizione]
    \begin{itemize} 
        \item Le variabili libere di $X(t_1, \dots, t_n)$ con $X$ variabile di
            relazione $n$-aria, sono $X$ e l'unione di tutte le variabili libere
            che compaiono nei termini $t_i$ per ogni $i$.
        \item Le variabili libere di $r(t_1, \dots, t_n)$ con $r$ simbolo d
            relazione $n$-aria sono l'unione di tutte le variabili libere che
            compaiono nei termini $t_i$ per ogni $i$.
        \item Le variabili libere di $\phi \land \psi$, $\phi \lor \psi$, $\phi
            \rar \psi$ sono l'unione delle variabili libere di $\phi$ e $\psi$.
        \item Le variabili libere di $\forall x \phi$ e $\exists x \phi$ con $x$
            variabile, sono le variabili libere di $\phi$ meno $x$.
        \item Le variabili libere di $\forall X \phi$ e $\exists X \phi$ con $X$
            variabile di relazione, sono le variabili libere di $\phi$ meno $X$.
    \end{itemize} 
\end{block}

La sostituzione di termini nelle variabili \`e la sostituzione standard, con
l'attenzione di evitare la cattura delle variabili. Per sostituire invece
relazioni al posto di variabili di relazione ci appoggeremo al concetto di
specie.

\begin{block}[Definizione]
    Sia $\phi$ una formula e $x_1, \dots, x_n$ delle variabili individuali,
    allora l'espressione $\l x_1, \dots, x_n.\phi$ \`e una specie di ariet\`a
    $n$. Si noti che le variabili $x_i$ possono apparire o non apparire in
    $\phi$. 

    Le variabili libere di $\l x_1, \dots, x_n.\phi$ sono le variabili libere di
    $\phi$ meno le variabili $x_i$.

    Abbrevieremo inoltre l'espressione $\l x_1, \dots x_n.X(x_1, \dots, x_n)$
    con semplicemente $X$ e se $\underline{x}=x_1,\dots, x_n$, abbrevieremo $\l
    x_1, \dots, x_n.\phi$ con $\l\underline{x}.\phi$.

    Definiamo inoltre induttivamente la sostituzione di una specie di ariet\`a
    $n$ $\l\underline{x}.\phi$ in una variabile di relazione $n$-aria $X$:
    \begin{itemize}
        \item $\bot\sub{\l\underline{x}.\phi}{X} = \bot$.
        \item $r(t_1, \dots, t_n)\sub{\l\underline{x}.\phi}{X} = r(t_1, \dots,
            t_n)$ quando $r$ \`e una relazione oppure una variabile di relazione
            diversa da $X$.
        \item $(X(\underline{t})\sub{\l\underline{x}.\phi}{X} =
            \phi\sub{\underline{t}}{\underline{x}}$.
        \item $(\eta\rar\psi)\sub{\l\underline{x}.\phi}{X} =
            \eta\sub{\l\underline{x}.\phi}{X} \rar
            \psi\sub{\l\underline{x}.\phi}{X}$
            e equivalentemente per $\eta\lor\psi$ e $\eta\land\psi$.
        \item $(\forall x \eta)\sub{\l\underline{x}.\phi}{X} = \forall x
            \eta\sub{\l\underline{x}.\phi}{X}$ per tutte le variabili
            individuali $x$ che non appaiono libere in $\l\underline{x}.\phi$.
            Equvalentemente per $\exists x \eta$.
        \item $(\forall Y \eta)\sub{\l\underline{x}.\phi}{X} = \forall Y
            \eta\sub{\l\underline{x}.\phi}{X}$ con $Y$ variabile di relazione
            diversa da $X$ e $Y$ che non appare libera in
            $\l\underline{x}.\phi$.
    \end{itemize}
\end{block}

Per fare un esempio sostituendo $\l x. \phi(x,a)$ al posto di $X$ in $\forall y
X(y)$ otteniamo $\forall y \phi(y,a)$.

A questo punto presentiamo le regole della deduzione naturale per la
logica del secondo ordine:
\begin{gather*}
    \begin{prooftree}
        \hypo{\Gamma\vdash\phi}
        \infer1[$\forall^2$I]{\Gamma \vdash \forall X\phi}
    \end{prooftree}
    \hspace{2cm}
    \begin{prooftree}
        \hypo{\Gamma \vdash \forall X\phi}
        \infer1[$\forall^2$E]{\Gamma \vdash \phi\sub{\l x.\psi}{X}}
    \end{prooftree} \\ \vspace{3cm} \\
    \begin{prooftree}
        \hypo{\Gamma\vdash\phi\sub{\l x. \psi}{X}}
        \infer1[$\exists^2$I]{\Gamma \vdash \exists X\phi}
    \end{prooftree}
    \hspace{2cm}
    \begin{prooftree}
        \hypo{\Gamma \vdash \exists X\phi}
        \hypo{\Gamma,\phi \vdash \psi}
        \infer2[$\exists^2$E]{\Gamma \vdash \psi}
    \end{prooftree} 
\end{gather*}

in cui in $\forall^2I$ la variabile di proposizione $X$ non appare libera in
$\Gamma$ e in $\exists^2E$ non appare libera n\'e in $\Gamma$ n\'e in $\psi$.

Aggiungendo queste regole alle regole della deduzione naturale per la logica
classica del primo ordine, si ottiene il sistema per la logica classica del
secondo ordine. Equivalentemente, aggiungendole alle regole per la logica
intuizionista del primo ordine si ottiene il sistema per la logica intuizionista
del secondo ordine.

Notiamo che \`e possibile dimostrare in entrambi i tipi di logica il principio
di comprensione:
\[
    \exists Y\ \forall x\ (\phi(x) \leftrightarrow Y(x)).
\]
per ogni formula $\phi$.

Inoltre molti dei connettivi presentati sono ridondanti: infatti \`e possibile
definirli tutti in termini dei soli $\rar$, $\bot$ e $\forall$ (su variabili
individuali e di relazione). In particolare: 
\begin{itemize}
    \item $\phi \lor \psi = \forall X ((\phi\rar X)\rar (\psi\rar X) \rar X)$.
    \item $\phi \land \psi = \forall X ((\phi\rar\psi\rar X) \rar X)$.
    \item $\exists x \phi = \forall R (\forall x(\phi\rar R)\rar R)$.
    \item $\exists X \phi = \forall R (\forall X(\phi\rar R)\rar R)$.
\end{itemize}
    
Inoltre, nell'ambito della logica intuizionista, anche il simbolo $\bot$ \`e
superfluo perch\'e pu\`o essere riscritto come $\bot = \forall X.X$.

\deb{Fare un esempio di dimostrazione?}

Il prossimo passo \`e quello di mettere in evidenza un rapporto che sussiste tra
le proposizioni derivabili dalla logica intuizionista e la logica classica.
\begin{block}[Definizione]
    Data una formula $\phi$ definiamo induttivamente la sua traduzione di
    Kolmogorov $k(\phi)$ come:
    \begin{itemize}
        \item $\lnot\lnot \phi$ se $\phi$ \`e atomica.
        \item $\lnot\lnot(k(\eta)\rar k(\psi))$ se $\phi=\eta\rar\psi$.
        \item $\lnot\lnot \forall x k(\psi)$ se $\phi = \forall x \psi$ per la
            quantificazione universale del primo ordine.
        \item $\lnot\lnot \forall X k(\psi)$ se $\phi = \forall X \psi$ per la
            quantificazione universale del secondo ordine.
    \end{itemize}
\end{block}

A questo punto possiamo enunciare il seguente risultato, che mette in relazione
la logica intuizionista con quella classica:
\begin{block}[Proposizione]
    La proposizione $\phi$ \`e un teorema della logica classica se e solo se
    $k(\phi)$ \`e un teorema della logica intuizionista.
\end{block}

Introduciamo adesso le aritmetiche del secondo ordine. Utilizziamo un linguaggio
che ha come unica costante $O$, il simbolo di funzione successore $S$ e una
relazione binaria di uguaglianza $=$.

Consideriamo i seguenti assiomi per l'uguaglianza:
\begin{nlist}[U1]
    \item $\forall a (a=a)$;
    \item $\forall ab (a=b\rar b=a)$;
    \item $\forall abc (a=b \rar b=c \rar a=c)$;
    \item $\forall ab(a=b \rar Sa = Sb)$,
\end{nlist}
in cui i primi tre sono i consueti assiomi per una relazione di equivalenza e
l'ultimo \`e una sorta di passo induttivo.

Aggiungiamo ancora tre assiomi di Peano:
\begin{nlist}[P1]
    \item $\forall ab(Sa =Sb \rar a = b)$;
    \item $\forall a(Sa=0 \rar \bot)$;
    \item $\forall a\ \text{Int}(a)$,
\end{nlist}
dove $\text{Int}(a) = \forall X(\forall b (X(b)\rar X(Sb)) \rar X(0) \rar X(a))$
serve a sostituire lo schema di induzione.

\begin{block}[Definizione]
    Gli assiomi (U1-4) e (P1-2) utilizzati con il sistema della logica classica
    del secondo ordine definiscono l'aritmetica di peano del secondo ordine PA2.
    Quando invece sono utilizzati con il sistema della logica intuizionista del
    secondo ordine definiscono l'aritmetica di Heyting del secondo ordine HA2.
\end{block}

Notiamo che nelle teorie presentate abbiamo omesso l'assioma di induzione (P3).
Questo perch\'e, attraverso la formula $\tint$ \`e possibile relativizzare ogni
quantificazione ai termini che la soddisfano. Per esempio una formula $\forall x
\phi$ pu\`o essere relativizzata con $\forall x (\tint(x)\rar \phi)$.

Utilizzando la quantificazione al secondo ordine \`e anche possibili definire
dei predicati per la somma e il prodotto (e anche per le funzioni primitive
ricorsive).

Un teorema di fondamentale importanza per le discussioni che seguiranno (e di
cui abbiamo gi\`a utilizzato una versione al primo ordine) \`e:
\begin{block}[Teorema]
    Le funzioni dimostrabilmente totali in PA2 sono esattamente le funzioni
    dimostrabilmente totali in HA2.
\end{block}

Per dimostrare il teorema ci appoggeremo alla seguente definizione:
\begin{block}[Definizione]
    Sia $\phi$ e $\psi$ due formule. Denotiamo con $\phi^\psi$ la formula
    ottenuta sostituendo ogni sottoformula atomica (compresa $\bot$ quindi)
    $\eta$ presente in $\phi$ con $\eta\lor\psi$, assumendo che le variabili
    libere di $\eta$ non siano legate in $\phi$.
\end{block}

Risulta utile verificare le seguenti propriet\`a per il costrutto appena
definito.
\begin{block}[Lemma]
    Per ogni coppia di formule $\phi$ e $\psi$ valgono i seguenti punti:
    \begin{enumerate}[(i)]
        \item $\psi\rar \phi^\psi$ \`e un teorema intuizionista.
        \item Se $a$ \`e termine e $x$ \`e una variabile che non occore libera
            in $\psi$, allora vale $(\phi\sub{a}{x})^\psi = \phi^\psi\sub
            {a}{x}$.
        \item Siano $X$ e $\l \overline{x}.\eta$ rispettivamente una variabile
            di proposizione e una specie di uguale ariet\`a per cui $X$ e
            $\overline{x}$ non occorrono libere in in $\psi$. Allora la formula
            $(\phi\sub{\l \overline{x}.\eta}{X})^\psi \leftrightarrow
            \phi^\psi\sub{\l \overline{x}.\eta^\psi}{X} $ \`e un teorema della
            logica intuizionista.
        \item Se $\Gamma \vdash \phi$, allora $\Gamma^\psi \vdash \phi^\psi$,
            dove $\Gamma^\psi = \setof{\gamma^\psi \st \gamma \in \Gamma}$.
        \item Se $\phi$ \`e un assioma di HA2, allora $\text{HA2}\vdash
            \phi^\psi$.
        \item Se $\text{HA2}\vdash \phi$, allora anche $\text{HA2}\vdash
            \phi^\psi$
        \item Se $\phi$ \`e una formula $\Delta_0$, allora $\text{HA2} \vdash
            \phi^\psi \rar \phi\lor \psi$
    \end{enumerate}
\end{block}

\begin{proof}
    \begin{enumerate}[(i)]
        \item La dimostrazione di questo punto si pu\`o fare per induzione sulla
            complessit\`a di $\phi$.
        \item Anche questo punto viene dimostrato per induzione sulla
            complessit\`a di $\phi$. \deb{Qui devo entrare pi\`u nei dettagli?}
        \item Nuovamente si tratta di un'induzione. In questo caso il passo base
            \`e interessante e fa uso dei due punti precedenti. Infatti se
            $\phi=X(\overline{y})$, dove $X$ \`e una variabile di proposizione,
            allora 
            \begin{gather*}
                (\phi\sub{\l \overline{x}.\eta}{X})^\psi  = 
                (\eta\sub {\overline{y}}{\overline{x}})^\psi = \\
                \eta^\psi\sub {\overline{y}}{\overline{x}}= 
                \phi\sub{\l \overline{x}.\eta^\psi}{X},
            \end{gather*}
            dove la seconda uguaglianza \`e giustificata dal primo punto di
            questo lemma.  Notiamo inoltre che per il primo punto si ha che
            $\vdash \psi \rar (\phi\sub{\l \overline{x}.\eta}{X})^\psi$ e dunque
            anche $\vdash \psi \rar \phi\sub{\l \overline{x}.\eta^\psi}{X}$.
            Siccome $\overline{x}$ e $X$ non compaiono libere in $\psi$, si ha
            che $\psi = \psi \sub {\l \overline{x}.\eta^\psi}{X}$. Da ci\`o si
            ottiene che
            \begin{gather*}
                \vdash
                (X(\overline{y})
                \lor\psi)\sub {\l \overline{x}.\eta ^\psi}{X}
                \leftrightarrow \phi \sub {\l \overline{x}.\eta ^\psi}{X},
            \end{gather*}
            che \`e la formula che volevamo dimostrare.
        \item Questo punto \`e ancora una semplice induzione.
        \item Qui procediamo per induzione, ma sulla complessit\`a della
            dimostrazione. I punti pi\`u interessanti sono i casi in cui la
            dimostrazione termina con l'eliminazione di un quantificatore
            universale del primo o del secondo ordine, in cui si utilizzano
            rispettivamente il secondo e il terzo punto di questo lemma.

            Nel caso in cui l'ultimo passo della dimostrazione di $\Gamma \vdash
            \phi \sub{\l \overline{x}. \eta}{X}$ fosse fatto eliminando il
            quantificatore del secondo ordine a partire da $\Gamma \vdash
            \forall X \phi$, allora per ipotesi induttiva si ha che $\Gamma^\psi
            \vdash (\forall X \phi)^\psi = \forall X \phi^\psi$. Ma allora
            $\Gamma^\psi \vdash \phi\sub{\l \overline{x}. \eta^\psi}{X}$. Per il
            terzo punto si ottiene il risultato voluto $\Gamma ^\psi \vdash
            (\phi\sub{\l \overline{x}.\eta}{X})^\psi$.

            Nel caso in cui la dimostrazione di $\Gamma \vdash
            \phi\sub{\overline{t}} {\overline{x}}$ si concludesse con
            l'eliminazione del quantificatore universale del primo ordine a
            partire dal giudizio $\Gamma \vdash \forall x\phi$, si avrebbe che
            per ipotesi induttiva $\Gamma ^\psi \vdash \forall x \phi^\psi$.
            Dunque $\Gamma ^\psi \vdash
            \phi^\psi\sub{\overline{t}}{\overline{x}}$ e la tesi si ottiene
            applicando il secondo punto.
        \item Ancora una volta, la dimostrazione \`e fatta per induzione sulla
            complessit\`a della formula $\phi$. Vediamo il passo induttivo
            quando la formula $\phi$ \`e nella forma $\forall x<t\ \eta$.
            Vogliamo allora dimostrare che $\forall y [(\forall x<y\ \eta) ^\psi
            \rar (\forall x<y\ \eta) \lor \psi$. Questa formula la dimostriamo
            per induzione su $y$. Infatti il caso $(\forall x<0\ \eta)\lor \psi$
            vale a vuoto. Per il passo induttivo supponiamo che $\forall x
            [(x<Sy \lor \psi) \rar \eta^\psi]$. Allora Utilizzando l'ipotesi
            induttiva sulla complessit\`a della formula otteniamo che $\forall x
            [(x<Sy \lor \psi) \rar \eta \lor \psi]$. Raccogliendo, si ha che
            $(\forall x<Sy\ \eta)\lor \psi$, e dunque applicando l'introduzione
            di $\rar$, si ha la tesi.
            
            Il caso con il quantificatore esistenziale viene trattato
            analogamente.
    \end{enumerate}
\end{proof}

Infine dimostriamo una proposizione pi\`u forte del teorema.

\begin{block}[Proposizione]
    Le formule chiuse $\Pi ^0_2$ dimostrabili in HA2 sono esattamente quelle
    dimostrabili in PA2.
\end{block}
\begin{proof}
    Sia $\phi=\forall x \exists y \eta$ una formula chiusa dimostrabile in PA2
    in cui $\eta$ \`e una formula $\Delta_0$. In particolare PA2 dimostra $\psi
    = \exists y \eta$.  Allora per il lemma \deb{XXX} vale che
    \[
        \text{HA2} \vdash \lnot\lnot \exists y (\lnot\lnot \eta).
    \]
    Consideriamo ora $(\lnot\lnot \exists y (\lnot\lnot \eta)) ^\psi$, e
    semplificando le sottoformule $\bot\lor\psi$ sostituendole semplicemente con
    $\psi$, si ottiene che 
    \[
        \text{HA2} \vdash (\exists y [((\eta\lor\psi) \rar \psi) \rar \psi])
        \rar \psi) \rar \psi.
    \]
    Nelle ultime formule si \`e anche usato il \deb{lemma}, in quanto $\eta$ \`e
    una formula $\Delta_0$.

    Inoltre la sottoformula $(\eta\lor\psi) \rar \psi$ \`e dimostrabile, in
    quanto se \`e vera $\eta$, \`e vera anche $\psi$.  Da ci\`o si ottiene 
    \[
        \text{HA2} \vdash (\exists y  \psi) \rar \psi) \rar \psi
    \]
    e dunque si ricava 
    \[
        \text{HA2} \vdash \psi,
    \]
    ovvero la tesi.
\end{proof}

\section{Rappresentabilit\`a in F}

Nel sistema F \`e presente un tipo corrispondente ai numeri naturali, ovvero il
tipo
\[
    \tint = \Pi X. X \rar (X \rar X) \rar X
\]

dove si hanno i termini corrispondenti allo zero e al successore rispettivamente
uguali a
\[
    O = \L X. \l x^{X}. \l f^{X\rar X}. x
\]
\[
    S = \l n^\tint. \L X. \l x^X. \l f^{X\rar X}. f (nXxf).
\]

Possiamo scrivere allora i numerali come le forme normali di $S^nO$ per ogni $n$
naturale. A questo punto dimostriamo il lemma:

\begin{block}[Lemma]
    I numerali sono tutti e soli i termini chiusi in forma normale di tipo
    $\tint$. 
\end{block}

\begin{proof}
    In modo equivalente a quanto fatto con il $\l$-calcolo non tipato
    (\deb{Proposizione XXX}), un termine chiuso e in forma normale di tipo
    $\tint$ deve necessariamente essere in forma normale di testa 
    \[
        t = \L X. \l f^{X\rar X} x^X. v.
    \]
    Mostriamo per induzione sulla complessit\`a di $v$ che $v$ deve essere della
    forma $f^nx$ per qualche naturale $n$.
    Se infatti $v$ fosse nella forma $wu$ o $wU$ con $u$ termine distinto da $f$
    e $U$ un tipo, per normalit\`a $w$ non potrebbe essere un'astrazione o una
    generalizzazione. Allora $w$ dovrebbe essere nella forma $w'u'$ oppure
    $w'U'$, dove $w'$ e $u'$ sono termini e $U'$ \`e un tipo. Ma il tipo di $w'$
    dovrebbe allora essere pi\`u complessio di quello delle variabili $f$ e $x$,
    e dunque $w'$ deve necessariamente essere o un'astrazione o una
    generalizzazione. Questo \`e contraddittorio con il fatto che $w$ \`e in
    forma normale. 

    Abbiamo allora ottenuto come risultato che $v$ deve essere o una variabile o
    un termine nella forma $fu$. Nel primo caso, osservando i tipi, si ottiene
    che $v=x$ e dunque $t$ sar\`a il numerale corrispondente allo zero. Nel
    secondo caso per ipotesi induttiva $u$ \`e nella forma $f^nx$ e dunque $t$
    corrisponde al numerale $n+1$.
\end{proof}

In modo equivalente a quanto gi\`a fatto con le altre versioni del $\l$-calcolo
\`e possibile definire la nozione di funzione rappresentabile, e poi dare una
caratterizzazione di tali funzioni.

\begin{block}[Teorema]
    Le funzioni dimostrabilmente totali in PA2 sono tutte e sole le
    funzioni rappresentabili nel sistema F.
\end{block}

Iniziamo con la freccia pi\`u semplice, ovvero $\Leftarrow$. Come nel caso del
sistema T, la dimostrazione della forte normalizzazione di un termine, pu\`o
essere interpretata in PA2 come una dimostrazione della totalit\`a della
funzione corrispondente a tale termine. Infatti per la dimostrazione sono stati
utilizzati due principi:
\begin{itemize}
    \item Lo schema di comprensione, necessario a dimostrare che i riducibili
        parametrici sono candidati di riducibilit\`a. 
    \item Il principio di induzione.
\end{itemize}
Notiamo che tuttavia non \`e nuovamente possibile esprimere la riducibilit\`a
parametrica in modo uniforme su tutti i tipi del sistema F, ma soltanto caso per
caso per ciascun tipo.

L'obiettivo del resto della sezione \`e quello di dimostrare l'ultima freccia
del teorema, ovvero la seguente proposizione.
\begin{block}[Proposizione]
    Le funzioni dimostrabilmente totali in HA2 sono rappresentabili nel sistema
    F.
\end{block}

L'idea \`e quella di trovare una traduzione dalle dimostrazioni di totalit\`a di
una funzione in programmi del sistema F. Per fare ci\`o iniziamo con
l'associare ad ogni formula $\phi$ in HA2 (dimostrabile o non dimostrabile) un
tipo $\cod{\phi}$ del sistema F. L'associazione viene fatta con le seguenti
regole:
\begin{itemize}
    \item $\cod{a=b} = S$, dove $S$ \`e un tipo fissato per cui esiste almeno un
        termine di tale tipo, per esempio $S=\P X.X\rar X$.
    \item $\cod{\phi\rar\psi}=\cod{\phi}\rar\cod{\psi}$.
    \item $\cod{\forall x.\phi}=\cod{\phi}$, per le quantificazioni del primo
        ordine.
    \item $\cod{\forall X.\phi}=\cod{\phi}$ per le quantificazioni del secondo
        ordine.
\end{itemize}

Notiamo che con queste regole le variabili del primo ordine scompaiono
completamente, per cui $\cod{\phi\sub{a}{x}}=\cod{\phi}$.

Inoltre \`e possibile esprimere i connettivi di congiunzione e disgiunzione con
le implicazioni e la quantificazione al secondo ordine, e associare ad essi un
relativo tipo:
\[
    \cod{\phi\land\psi}=\cod{\forall X((\phi\rar\psi\rar X)\rar X)} = \P X
    .(\cod{\phi}\rar\cod{\psi} \rar X)\rar X.
\]
Questo tipo corrisponde a quello che avevamo definito essere $\cod{\phi} \times
\cod{\psi}$. In modo simile vale che il tipo relativo a $\phi \lor \psi$ \`e
uguale al tipo $\cod{\phi}+\cod{\psi}$. Notiamo tuttavia che i tipi $\cod{
\phi\land\psi}$ (rispettivamente $\cod{\phi\lor\psi}$) sono differenti dai tipi
$\cod{ \psi\land\phi}$ (rispettivamente $\cod{\psi\lor\phi}$).

Analogamente possiamo trovare la traduzione della formula $\text{Int}(x)$. Essa
\`e infatti il tipo $\P X. X\rar(X\rar X)\rar X = \tint$.

\deb{DEF?}
Ora possiamo definire una traduzione di ogni dimostrazione di una formula $\phi$
con un termine di tipo $\cod{\phi}$. Utilizziamo la notazione $\cod{\delta}$ per
indicare la traduzione di una dimostrazione $\delta$. Tale traduzione avviene
secondo le seguenti regole:
\begin{itemize}
    \item Se $\delta$ \`e l'ipotesi $\eta_i$, allora $\cod{\delta}$ \`e la
        variabile $x_i$ di tipo $\cod{\eta_i}$.
    \item Ciascun assioma viene tradotto in un qualunque termine chiuso fissato
        del tipo corretto.
    \item Se l'ultimo passo di $\delta$ \`e la deduzione di una formula
        $\eta\rar\phi$ con l'introduzione dell'implicazione fatta eliminando
        l'ipotesi $\eta$ corrispondente alla variabile $x$ e se chiamiamo
        $\epsilon$ la dimostrazione di $\phi$, allora $\cod{\delta} = \l x.
        \cod{\phi}$. La situazione rappresentata \`e la seguente:
        \[
            \begin{prooftree}
                \hypo{\eta}
                \ellipsis{$\epsilon$}{\phi}
                \infer1[$\delta$]{\eta\rar\phi} 
            \end{prooftree}
        \]
    \item Se $\delta$ \`e la dimostrazione di una formula $\phi$ il cui ultimo
        passo \`e l'eliminazione dell'implicazione fatta a partire dalle formule
        $\psi$ e $\psi\rar\phi$, dimostrate rispettivamente con $\epsilon$ e con
        $\gamma$, allora $\cod{\delta} = \cod{\gamma}\cod{\epsilon}$.
        La situazione \`e illustrata da:
        \[
            \begin{prooftree}
                \hypo{}
                \ellipsis{$\gamma$}{\psi\rar\phi}
                \hypo{}
                \ellipsis{$\epsilon$}{\psi}
                \infer2[$\delta$]{\phi}
            \end{prooftree}
        \]
    \item Se l'ultimo passo di $\delta$ \`e l'introduzione o l'eliminazione di
        un quantificatore del primo ordine, allora la traduzione non fa nulla.
        In particolare se l'ultima inferenza di $\delta$ introduce la
        quantificazione universale $\forall x\phi$ a partire da $\phi$, formula
        dimostrata con $\epsilon$, allora $\cod{\delta}=\cod{\epsilon}$.
        Similmente, se l'ultima inferenza di $\delta$ dimostra $\phi \sub{a}{x}$
        a partire da $\forall x \phi$, formula dimostrata con $\epsilon$, allora
        si ha ancora $\cod{\delta}=\cod{\epsilon}$.
        Le situazioni illustrate sono le seguenti:
        \[
            \begin{prooftree}
                \hypo{}
                \ellipsis{$\epsilon$}{\phi}
                \infer1[$\delta$]{\forall x \phi}
            \end{prooftree}
            \hspace{3cm}
            \begin{prooftree}
                \hypo{}
                \ellipsis{$\epsilon$}{\forall x \phi}
                \infer1[$\delta$]{\phi\sub{a}{x}}
            \end{prooftree}
        \]
    \item Se $\delta$ termina con l'introduzione di un quantificatore universale
        del secondo ordine per dimostrare una formula $\forall X\phi$ a partire
        da  $\phi$, dimostrata a sua volta da $\epsilon$, allora $\cod{\delta} =
        \P X. \cod{\epsilon}$. La situazione corrispondente \`e:
        \[
            \begin{prooftree}
                \hypo{}
                \ellipsis{$\epsilon$}{\phi}
                \infer1[$\delta$]{\forall X \phi}
            \end{prooftree}
        \]
    \item Infine se $\delta$ termina con l'eliminazione di una quantificazione
        del secondo ordine in cui partendo da una formula $\forall X.\phi$,
        dimostrata con $\epsilon$ si deduce $\phi\sub{\l x. \psi}{X}$, allora
        $\cod{\delta} = \cod{\epsilon}\cod{\psi}$ (in cui nel secondo membro la
        prima traduzione \`e quella di una dimostrazione, la seconda \`e quella
        di una formula). La situazione \`e la seguente:
        \[
            \begin{prooftree}
                \hypo{}
                \ellipsis{$\epsilon$}{\forall x \phi}
                \infer1[$\delta$]{\phi\sub{\l x.\psi}{X}}
            \end{prooftree}
        \]
\end{itemize}

Osserviamo che le regole appena presentate rispettano i tipi di tutte le
formule. Inoltre le variabili libere presenti nelle traduzioni corrispondono ad
altrettante ipotesi utilizzate nella dimostrazione.

Occorre notare per\`o che la definizione precedente nasconde una difficolt\`a:
infatti non esiste alcun termine chiuso che pu\`o tradurre l'assioma $\forall x
(Sx=O \rar \bot)$. Infatti la sua traduzione, ricordando che $\bot$ \`e una
scorciatoia sintattica per $\forall XX$, \`e di tipo $S\rar (\P X.X)$. 

Per risolvere il problema si potrebbe aggiungere al sistema F un termine
artificiale $\Omega$ di tipo $\P X.X$ e tradurre l'assioma con $\l x^S.\Omega$.

Noi tuttavia seguiremo un'altra strada, che consiste nel sostituire l'assioma
problematico con uno pi\`u debole, ovvero con $\forall x \forall y (Sx=O\rar
y=O)$. Chiamiamo HA2m la versione modificata di HA2 in cui \`e stata fatta
tale sostituizione, e vedremo che nonostante HA2m sia pi\`u debole di HA2, \`e
equivalente ad esso quando si tratta di dimostrare la totalit\`a di funzioni.
Pertanto ci baster\`a dimostrare il teorema con HA2m per avere il risultato che
cerchiamo. Verifichiamo quanto detto nella seguente proposizione:

\begin{block}[Proposizione]
    Una funzione \`e dimostrabilmente totale in HA2m se e solo se lo \`e in HA2.
\end{block}

\begin{proof}
    Sia $\phi$ la formula che esprime la totalit\`a di una funzione, nella forma 
    $\forall n \exists m \psi$ in cui $\psi$ \`e una formula $\Sigma^0_1$.
    Supponiamo che $\text{HA2}\vdash\phi$.
    Siano $P = \forall x (Sx=O\rar \bot)$ e $P' = \forall x \forall y (Sx=O\rar
    y=O)$ i due assiomi. Notiamo che da $P'$ \`e possibile dedurre $P \lor
    \forall y(y=O)$. Da entrambe le componenti siamo comunque in grado di
    dimostrare $\phi$. Infatti dalla prima si pu\`o direttamente usare la
    dimostrazione fatta in HA2. Dalla seconda discende che $\phi$ \`e vera se e
    solo se \`e vera $\exists m \psi\sub{O}{n}$. Ma questa \`e una formula
    $\Sigma^0_1$ che esprime la terminazione di $f(0)$. Quindi \`e vera nel
    modello standard e dunque \`e anche dimostrabile.
\end{proof}

Il seguente lemma \`e un corrispettivo del lemma \deb{XXX} nel caso della
logica.
\begin{block}[Lemma]
    Esiste un'unica deduzione normale di $\text{Int} (S^nO)$, ovvero
    $\check{n}$.
\end{block}
\begin{proof}
    Sia $\delta$ una deduzione normale di $\text{Int} (S^nO)$. Dimostriamo
    come prima cosa che $\delta$ non pu\`o terminare con un'eliminazione,
    perch\`e partendo da soli assiomi (del primo ordine) non \`e possibile
    arrivare alla conclusione utilizzando soltanto eliminazioni. Quindi l'ultimo
    passo deve essere l'introduzione del quantificatore universale del secondo
    ordine, a partire da $X(O) \rar \forall x (X(x)\rar X(Sx)) \rar
    X(\overline{n})$. Per le stesse ragioni di prima la dimostrazione di questa
    formula deve essere un'introduzione, e l'ultimo passo deve avere come
    premessa la dimostrazione di $\forall x (X(x)\rar X(Sx)) \rar
    X(\overline{n})$ a partire da $X(O)$. Poich\`e non si pu\`o applicare alcuna
    regola di eliminazione a quest'ultima formula, il passo ancora precedente
    \`e nuovamente un'introduzione. Risalendo ancora di un passo, si deve
    dimostrare $X(\overline{n})$ a partire da $X(O)$ e $\forall x (X(x)\rar
    X(Sx))$. Questo non si pu\`o fare con un'introduzione, in quanto la formula
    da dimostrare \`e atomica. Se $\overline{n} = O$, allora abbiamo concluso,
    in quanto l'ultima formula da dimostrare \`e una delle ipotesi. In caso
    contrario si deve avere $\overline{n} = S \overline{n-1}$. L'unica
    eliminazione possibile che termina con $X(S\overline{n-1}$ passa attraverso
    $X(\overline{n-1}) \rar X(S \overline{n-1}$, che a sua volta deriva da
    un'eliminazione sull'ipotesi $\forall x(X(x)\rar X(Sx))$. La premessa minore
    dell'eliminazione dell'implicazione necessita di una dimostrazione della
    formula $X(\overline{n-1}$ a partire dalle due ipotesi che avevamo e dagli
    assiomi dell'aritmetica. In realt\`a il ragionamento \`e uguale a quello
    fatto per $n$, e questo conclude la dimostrazione.
\end{proof}

Infine concludiamo con la dimostrazione del risultato principale.
\begin{proof}
    Consideriamo la formula $\phi(x,y)$ che esprime il fatto che dato un
    algoritmo con input $x$ termini con output $y=f(x)$, a meno di una codifica
    con numeral.  Supponiamo di voler dimostrare in HA2
    \[
        \forall n\in\N\ \exists m\in\N . \phi(x,y)
    \]
    ovvero
    \[
        \forall x (\text{Int}(x)\rar \exists y. (\text{Int}(y)\land \phi(x,y))).
    \]
    Chiamiamo $\delta$ tale dimostrazione. Ad essa associamo un termine
    $\cod{\delta}$ di tipo $\tint\rar (\tint\times\cod{\phi})$ e un termine $t =
    \l x^\tint.\pi^1(\cod{\delta}x)$ che ne contiene il significato algoritmico.

    Infatti per ogni naturale $n$, la forma normale della deduzione di $\exists
    y.  (\text{Int}(y)\land \phi(S^nO,y))$ deve necessariamente terminare con
    l'introduzione
    \[
        \begin{prooftree}
            \hypo{\text{Int}(S^mO)\land \phi(S^nO,S^mO)} 
            \infer1[$\exists \text{I}$]{\exists y.(\text{Int}(y)\land
                \phi(S^nO,y))}
        \end{prooftree}.
    \]
    Dunque applicando l'eliminazione a sinistra alla deduzione di
    $\text{Int}(S^mO)\land \phi(S^nO,S^mO)$ si ottiene una deduzione di
    $\text{Int}(S^mO)$, la cui traduzione \`e equivalente a $t\overline{n}$. Per
    il lemma \deb{XXX}, tale deduzione ha una forma normale $\check{m}$, per cui
    $t \overline{n}$ si normalizza a $\overline{m}$. Inoltre poich\'e la formula
    $\phi(S^nO, S^mO)$ \`e dimostrabile in HA2, essa \`e vera nel modello
    standard e quindi $f(n)=m$. Questo conclude la dimostrazione della
    proposizione.
\end{proof}

\subsection{Conseguenze}
Iniziamo con il presentare una funzione che non \`e rappresentabile nel sistema
F. Se $m$ \`e un numero naturale che codifica il termine $t$, indichiamo con
$N(m)$ come la codifica della forma normale di $t$. Inoltre se $m$ codifica $t$
e $n$ codifica $u$, indichiamo con $A(m, n)$ la codifica dell'applicazione $tu$.
Inoltre definiamo la funzione $B$ che ad ogni naturale $n$ associa la codifica
del numerale $\overline{n}$ e definiamo $C$ come la sua funzione inversa. Il
valore di queste funzioni con argomenti che non sono opportune codifiche non \`e
importante, e possiamo assumere che sia zero.

Ora consideriamo la funzione
\[
    D(n) = C[N(A(n, B(n)))] + 1.
\]
Se tutte le funzioni definite sopra sono rappresentabili, anche $D$ \`e
rappresentabile. Ma ci\`o \`e assurdo. Infatti supponiamo che $t$ sia un termine
di tipo $\tint\rar\tint$ che rappresenta $D$, e sia $n$ la codifica di $t$. 

Allora $A(n, B(n))$ \`e la codifica di $t\overline{n}$, e $N(A(n, B(n)))$ \`e la
codifica della sua forma normale. Ma per come \`e definito $t$ si deve avere che
$t\overline{n} \conv \overline{D(n)}$ e quindi $N(A(n, B(n))) = B(D(n))$.
Da questo si ottiene $C[N(A(n, B(n)))] = D(n)$, e per la definizione di $D$ si
ha che $D(n) = D(n)+1$.

Si ottiene dunque che o $D$ o una delle funzioni tra $N$, $A$, $B$ o $C$ non \`e
rappresentabile. Questo implica che esiste una funzione per cui l'aritmetica di
Peano (o di Heyting) del secondo ordine non \`e in grado di dimostrare la
totalit\`a, e dunque tale teoria \`e coerente. Abbiamo dunque dimostrato che la
normalizzazione forte del sistema F implica la coerenza di PA2.

Otteniamo come risultato che la normalizzazione forte del sistema F \`e
indipendente dagli assiomi di Peano del secondo ordine.
\end{document}
